---
**æ–‡æ¡£ç±»å‹**: å¼€å‘å®æ–½æŒ‡å—
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**åˆ›å»ºæ—¥æœŸ**: 2025-07-29
**æœ€åæ›´æ–°**: 2025-07-29
**æ–‡æ¡£æ‰€æœ‰è€…**: æŠ€æœ¯è´Ÿè´£äºº
**å®¡æ‰¹çŠ¶æ€**: å·²å®¡æ‰¹
**å˜æ›´è¯´æ˜**: ä¼ä¸šçº§å¼€å‘å®æ–½æŒ‡å—é‡æ„ï¼Œæä¾›è¯¦ç»†çš„å¼€å‘æ­¥éª¤å’Œæœ€ä½³å®è·µ
---

# ğŸ”§ ToDoListAreaå¼€å‘å®æ–½æŒ‡å—

## ğŸ”— ç›¸å…³æ–‡æ¡£é“¾æ¥

- [æ–‡æ¡£ä½“ç³»ä¸»ç´¢å¼•](./00_æ–‡æ¡£ä½“ç³»ä¸»ç´¢å¼•.md) - æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ä½“ç³»
- [æŠ€æœ¯é€‰å‹ä¸æ¶æ„è®¾è®¡](./03_æŠ€æœ¯é€‰å‹ä¸æ¶æ„è®¾è®¡.md) - æŸ¥çœ‹æŠ€æœ¯æ¶æ„
- [è¯¦ç»†è®¾è®¡è§„æ ¼ä¹¦](./04_è¯¦ç»†è®¾è®¡è§„æ ¼ä¹¦.md) - æŸ¥çœ‹ç³»ç»Ÿè®¾è®¡
- [APIæ¥å£è®¾è®¡è§„èŒƒ](./05_APIæ¥å£è®¾è®¡è§„èŒƒ.md) - æŸ¥çœ‹æ¥å£è§„èŒƒ

## ğŸ“‹ ç›®å½•

- [å¼€å‘ç¯å¢ƒæ­å»º](#å¼€å‘ç¯å¢ƒæ­å»º)
- [åç«¯å¼€å‘å®æ–½](#åç«¯å¼€å‘å®æ–½)
- [å‰ç«¯å¼€å‘å®æ–½](#å‰ç«¯å¼€å‘å®æ–½)
- [æ•°æ®åº“å¼€å‘](#æ•°æ®åº“å¼€å‘)
- [é›†æˆæµ‹è¯•](#é›†æˆæµ‹è¯•)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)

---

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒæ­å»º

### ğŸ“‹ ç¯å¢ƒè¦æ±‚æ¸…å•

#### å¼€å‘å·¥å…·è¦æ±‚
| å·¥å…·ç±»åˆ« | æ¨èå·¥å…· | ç‰ˆæœ¬è¦æ±‚ | å¿…éœ€æ€§ |
|----------|----------|----------|--------|
| **IDE** | Visual Studio 2022 | 17.8+ | å¿…éœ€ |
| **ä»£ç ç¼–è¾‘å™¨** | VS Code | 1.85+ | æ¨è |
| **æ•°æ®åº“å·¥å…·** | SQL Server Management Studio | 19.0+ | å¿…éœ€ |
| **APIæµ‹è¯•** | Postman | 10.0+ | æ¨è |
| **ç‰ˆæœ¬æ§åˆ¶** | Git | 2.40+ | å¿…éœ€ |
| **å®¹å™¨å·¥å…·** | Docker Desktop | 4.25+ | æ¨è |

#### è¿è¡Œæ—¶ç¯å¢ƒ
| ç»„ä»¶ | ç‰ˆæœ¬ | ä¸‹è½½åœ°å€ | é…ç½®è¯´æ˜ |
|------|------|----------|----------|
| **.NET SDK** | 8.0+ | [ä¸‹è½½](https://dotnet.microsoft.com/download) | å®‰è£…æœ€æ–°LTSç‰ˆæœ¬ |
| **Node.js** | 18.0+ | [ä¸‹è½½](https://nodejs.org/) | åŒ…å«npmåŒ…ç®¡ç†å™¨ |
| **SQL Server** | 2022 | [ä¸‹è½½](https://www.microsoft.com/sql-server) | å¼€å‘è€…ç‰ˆæœ¬å…è´¹ |
| **Redis** | 7.0+ | [ä¸‹è½½](https://redis.io/download) | å¯é€‰ï¼šç”¨äºç¼“å­˜ |

### ğŸ”§ ç¯å¢ƒé…ç½®æ­¥éª¤

#### æ­¥éª¤1: åŸºç¡€ç¯å¢ƒå®‰è£…
```bash
# 1. éªŒè¯.NET SDKå®‰è£…
dotnet --version
# é¢„æœŸè¾“å‡º: 8.0.x

# 2. éªŒè¯Node.jså®‰è£…
node --version
npm --version
# é¢„æœŸè¾“å‡º: v18.x.x, 9.x.x

# 3. éªŒè¯Gitå®‰è£…
git --version
# é¢„æœŸè¾“å‡º: git version 2.x.x
```

#### æ­¥éª¤2: é¡¹ç›®ä»£ç è·å–
```bash
# 1. å…‹éš†é¡¹ç›®ä»“åº“
git clone https://github.com/company/todolistarea.git
cd todolistarea

# 2. æ£€æŸ¥åˆ†æ”¯çŠ¶æ€
git branch -a
git checkout develop

# 3. åˆå§‹åŒ–å­æ¨¡å—ï¼ˆå¦‚æœ‰ï¼‰
git submodule update --init --recursive
```

#### æ­¥éª¤3: åç«¯ç¯å¢ƒé…ç½®
```bash
# 1. è¿›å…¥åç«¯é¡¹ç›®ç›®å½•
cd src/ToDoListArea.API

# 2. æ¢å¤NuGetåŒ…
dotnet restore

# 3. æ„å»ºé¡¹ç›®éªŒè¯
dotnet build

# 4. é…ç½®ç”¨æˆ·æœºå¯†
dotnet user-secrets init
dotnet user-secrets set "ConnectionStrings:DefaultConnection" "Server=localhost;Database=ToDoListArea;Trusted_Connection=true;"
dotnet user-secrets set "JwtSettings:SecretKey" "your-super-secret-key-here"
```

#### æ­¥éª¤4: å‰ç«¯ç¯å¢ƒé…ç½®
```bash
# 1. è¿›å…¥å‰ç«¯é¡¹ç›®ç›®å½•
cd src/ToDoListArea.Web

# 2. å®‰è£…ä¾èµ–åŒ…
npm install

# 3. éªŒè¯æ„å»º
npm run build

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local
# ç¼–è¾‘.env.localæ–‡ä»¶ï¼Œé…ç½®APIåœ°å€ç­‰
```

#### æ­¥éª¤5: æ•°æ®åº“ç¯å¢ƒé…ç½®
```sql
-- 1. åˆ›å»ºæ•°æ®åº“
CREATE DATABASE ToDoListArea;

-- 2. åˆ›å»ºå¼€å‘ç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
CREATE LOGIN tododev WITH PASSWORD = 'DevPassword123!';
USE ToDoListArea;
CREATE USER tododev FOR LOGIN tododev;
ALTER ROLE db_owner ADD MEMBER tododev;
```

```bash
# 3. è¿è¡Œæ•°æ®åº“è¿ç§»
cd src/ToDoListArea.API
dotnet ef database update
```

### âœ… ç¯å¢ƒéªŒè¯æ¸…å•

#### åç«¯éªŒè¯
```bash
# 1. å¯åŠ¨åç«¯æœåŠ¡
cd src/ToDoListArea.API
dotnet run

# 2. éªŒè¯APIå¯è®¿é—®
curl https://localhost:7001/api/health
# é¢„æœŸè¿”å›: {"status": "Healthy"}

# 3. éªŒè¯Swaggeræ–‡æ¡£
# æµè§ˆå™¨è®¿é—®: https://localhost:7001/swagger
```

#### å‰ç«¯éªŒè¯
```bash
# 1. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd src/ToDoListArea.Web
npm run dev

# 2. éªŒè¯é¡µé¢å¯è®¿é—®
# æµè§ˆå™¨è®¿é—®: http://localhost:5173

# 3. éªŒè¯çƒ­é‡è½½åŠŸèƒ½
# ä¿®æ”¹ä»»æ„ç»„ä»¶æ–‡ä»¶ï¼Œè§‚å¯Ÿé¡µé¢è‡ªåŠ¨åˆ·æ–°
```

#### æ•°æ®åº“éªŒè¯
```sql
-- 1. éªŒè¯è¡¨ç»“æ„
SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_TYPE = 'BASE TABLE';

-- 2. éªŒè¯ç¤ºä¾‹æ•°æ®
SELECT COUNT(*) FROM users;
SELECT COUNT(*) FROM task_categories;
```

---

## âš™ï¸ åç«¯å¼€å‘å®æ–½

### ğŸ—ï¸ é¡¹ç›®ç»“æ„åˆ›å»º

#### è§£å†³æ–¹æ¡ˆæ¶æ„æ­å»º
```bash
# 1. åˆ›å»ºè§£å†³æ–¹æ¡ˆ
dotnet new sln -n ToDoListArea

# 2. åˆ›å»ºé¡¹ç›®ç»“æ„
mkdir src tests docs

# 3. åˆ›å»ºå„å±‚é¡¹ç›®
cd src
dotnet new webapi -n ToDoListArea.API
dotnet new classlib -n ToDoListArea.Core
dotnet new classlib -n ToDoListArea.Infrastructure
dotnet new classlib -n ToDoListArea.Shared

# 4. æ·»åŠ é¡¹ç›®åˆ°è§£å†³æ–¹æ¡ˆ
cd ..
dotnet sln add src/ToDoListArea.API/ToDoListArea.API.csproj
dotnet sln add src/ToDoListArea.Core/ToDoListArea.Core.csproj
dotnet sln add src/ToDoListArea.Infrastructure/ToDoListArea.Infrastructure.csproj
dotnet sln add src/ToDoListArea.Shared/ToDoListArea.Shared.csproj

# 5. é…ç½®é¡¹ç›®å¼•ç”¨
cd src/ToDoListArea.API
dotnet add reference ../ToDoListArea.Core/ToDoListArea.Core.csproj
dotnet add reference ../ToDoListArea.Infrastructure/ToDoListArea.Infrastructure.csproj
dotnet add reference ../ToDoListArea.Shared/ToDoListArea.Shared.csproj

cd ../ToDoListArea.Infrastructure
dotnet add reference ../ToDoListArea.Core/ToDoListArea.Core.csproj
dotnet add reference ../ToDoListArea.Shared/ToDoListArea.Shared.csproj

cd ../ToDoListArea.Core
dotnet add reference ../ToDoListArea.Shared/ToDoListArea.Shared.csproj
```

#### NuGetåŒ…ä¾èµ–ç®¡ç†
```xml
<!-- ToDoListArea.API.csproj -->
<PackageReference Include="Microsoft.AspNetCore.Authentication.JwtBearer" Version="8.0.0" />
<PackageReference Include="Microsoft.AspNetCore.Identity.EntityFrameworkCore" Version="8.0.0" />
<PackageReference Include="Swashbuckle.AspNetCore" Version="6.5.0" />
<PackageReference Include="Serilog.AspNetCore" Version="8.0.0" />
<PackageReference Include="AutoMapper.Extensions.Microsoft.DependencyInjection" Version="12.0.1" />
<PackageReference Include="FluentValidation.AspNetCore" Version="11.3.0" />

<!-- ToDoListArea.Infrastructure.csproj -->
<PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer" Version="8.0.0" />
<PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="8.0.0" />
<PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="8.0.0" />
<PackageReference Include="Microsoft.Extensions.Caching.StackExchangeRedis" Version="8.0.0" />
<PackageReference Include="Hangfire.SqlServer" Version="1.8.6" />

<!-- ToDoListArea.Core.csproj -->
<PackageReference Include="Microsoft.AspNetCore.Identity.EntityFrameworkCore" Version="8.0.0" />
<PackageReference Include="FluentValidation" Version="11.8.0" />
<PackageReference Include="AutoMapper" Version="12.0.1" />
```

### ğŸ”§ æ ¸å¿ƒç»„ä»¶å®ç°

#### 1. å®ä½“æ¨¡å‹è®¾è®¡
```csharp
// ToDoListArea.Core/Entities/User.cs
public class User : IdentityUser<Guid>
{
    public string FirstName { get; set; } = string.Empty;
    public string LastName { get; set; } = string.Empty;
    public string? AvatarUrl { get; set; }
    public string Timezone { get; set; } = "UTC";
    public string Language { get; set; } = "zh-CN";
    public bool IsActive { get; set; } = true;
    public DateTime CreatedAt { get; set; } = DateTime.UtcNow;
    public DateTime UpdatedAt { get; set; } = DateTime.UtcNow;
    
    // å¯¼èˆªå±æ€§
    public virtual ICollection<TaskItem> Tasks { get; set; } = new List<TaskItem>();
    public virtual UserProfile? Profile { get; set; }
}

// ToDoListArea.Core/Entities/TaskItem.cs
public class TaskItem
{
    public Guid Id { get; set; } = Guid.NewGuid();
    public Guid UserId { get; set; }
    public Guid? ParentTaskId { get; set; }
    public Guid? CategoryId { get; set; }
    
    public string Title { get; set; } = string.Empty;
    public string? Description { get; set; }
    public TaskStatus Status { get; set; } = TaskStatus.Pending;
    public TaskPriority Priority { get; set; } = TaskPriority.Medium;
    
    public DateTime? StartTime { get; set; }
    public DateTime? EndTime { get; set; }
    public int? EstimatedDuration { get; set; }
    public int? ActualDuration { get; set; }
    
    public decimal CompletionPercentage { get; set; } = 0;
    public bool IsRecurring { get; set; } = false;
    public string? RecurrencePattern { get; set; }
    public string? Tags { get; set; }
    
    public DateTime CreatedAt { get; set; } = DateTime.UtcNow;
    public DateTime UpdatedAt { get; set; } = DateTime.UtcNow;
    public DateTime? CompletedAt { get; set; }
    
    // å¯¼èˆªå±æ€§
    public virtual User User { get; set; } = null!;
    public virtual TaskItem? ParentTask { get; set; }
    public virtual ICollection<TaskItem> SubTasks { get; set; } = new List<TaskItem>();
    public virtual TaskCategory? Category { get; set; }
}
```

#### 2. æ•°æ®è®¿é—®å±‚å®ç°
```csharp
// ToDoListArea.Infrastructure/Data/ToDoListDbContext.cs
public class ToDoListDbContext : IdentityDbContext<User, IdentityRole<Guid>, Guid>
{
    public ToDoListDbContext(DbContextOptions<ToDoListDbContext> options) : base(options) { }
    
    public DbSet<TaskItem> Tasks { get; set; }
    public DbSet<TaskCategory> TaskCategories { get; set; }
    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<Reminder> Reminders { get; set; }
    
    protected override void OnModelCreating(ModelBuilder builder)
    {
        base.OnModelCreating(builder);
        
        // åº”ç”¨æ‰€æœ‰å®ä½“é…ç½®
        builder.ApplyConfigurationsFromAssembly(typeof(ToDoListDbContext).Assembly);
        
        // é‡å‘½åIdentityè¡¨
        builder.Entity<User>().ToTable("users");
        builder.Entity<IdentityRole<Guid>>().ToTable("roles");
        builder.Entity<IdentityUserRole<Guid>>().ToTable("user_roles");
        builder.Entity<IdentityUserClaim<Guid>>().ToTable("user_claims");
        builder.Entity<IdentityUserLogin<Guid>>().ToTable("user_logins");
        builder.Entity<IdentityUserToken<Guid>>().ToTable("user_tokens");
        builder.Entity<IdentityRoleClaim<Guid>>().ToTable("role_claims");
    }
    
    public override async Task<int> SaveChangesAsync(CancellationToken cancellationToken = default)
    {
        // è‡ªåŠ¨æ›´æ–°æ—¶é—´æˆ³
        var entries = ChangeTracker.Entries()
            .Where(e => e.Entity is ITimestampEntity && (e.State == EntityState.Added || e.State == EntityState.Modified));
        
        foreach (var entry in entries)
        {
            var entity = (ITimestampEntity)entry.Entity;
            
            if (entry.State == EntityState.Added)
            {
                entity.CreatedAt = DateTime.UtcNow;
            }
            
            entity.UpdatedAt = DateTime.UtcNow;
        }
        
        return await base.SaveChangesAsync(cancellationToken);
    }
}

// ToDoListArea.Infrastructure/Data/Configurations/TaskConfiguration.cs
public class TaskConfiguration : IEntityTypeConfiguration<TaskItem>
{
    public void Configure(EntityTypeBuilder<TaskItem> builder)
    {
        builder.ToTable("tasks");
        
        builder.HasKey(t => t.Id);
        
        builder.Property(t => t.Title)
            .IsRequired()
            .HasMaxLength(255);
        
        builder.Property(t => t.Description)
            .HasColumnType("NVARCHAR(MAX)");
        
        builder.Property(t => t.Status)
            .HasConversion<string>()
            .HasMaxLength(20);
        
        builder.Property(t => t.Priority)
            .HasConversion<string>()
            .HasMaxLength(10);
        
        builder.Property(t => t.EstimatedDuration)
            .HasColumnType("INTEGER");
        
        builder.Property(t => t.CompletionPercentage)
            .HasColumnType("DECIMAL(5,2)");
        
        // å…³ç³»é…ç½®
        builder.HasOne(t => t.User)
            .WithMany(u => u.Tasks)
            .HasForeignKey(t => t.UserId)
            .OnDelete(DeleteBehavior.Cascade);
        
        builder.HasOne(t => t.ParentTask)
            .WithMany(t => t.SubTasks)
            .HasForeignKey(t => t.ParentTaskId)
            .OnDelete(DeleteBehavior.NoAction);
        
        builder.HasOne(t => t.Category)
            .WithMany()
            .HasForeignKey(t => t.CategoryId)
            .OnDelete(DeleteBehavior.SetNull);
        
        // ç´¢å¼•é…ç½®
        builder.HasIndex(t => new { t.UserId, t.Status, t.Priority })
            .HasDatabaseName("idx_tasks_user_status_priority");
        
        builder.HasIndex(t => new { t.StartTime, t.EndTime })
            .HasDatabaseName("idx_tasks_time_range");
    }
}
```

#### 3. ä»“å‚¨æ¨¡å¼å®ç°
```csharp
// ToDoListArea.Core/Interfaces/IRepository.cs
public interface IRepository<T> where T : class
{
    Task<T?> GetByIdAsync(Guid id);
    Task<IEnumerable<T>> GetAllAsync();
    Task<IEnumerable<T>> FindAsync(Expression<Func<T, bool>> predicate);
    Task<T?> FirstOrDefaultAsync(Expression<Func<T, bool>> predicate);
    Task<bool> AnyAsync(Expression<Func<T, bool>> predicate);
    Task<int> CountAsync(Expression<Func<T, bool>>? predicate = null);
    Task<PagedResult<T>> GetPagedAsync(int page, int pageSize, Expression<Func<T, bool>>? predicate = null);
    
    Task<T> AddAsync(T entity);
    Task<IEnumerable<T>> AddRangeAsync(IEnumerable<T> entities);
    Task UpdateAsync(T entity);
    Task UpdateRangeAsync(IEnumerable<T> entities);
    Task DeleteAsync(T entity);
    Task DeleteRangeAsync(IEnumerable<T> entities);
}

// ToDoListArea.Infrastructure/Repositories/Repository.cs
public class Repository<T> : IRepository<T> where T : class
{
    protected readonly ToDoListDbContext _context;
    protected readonly DbSet<T> _dbSet;
    
    public Repository(ToDoListDbContext context)
    {
        _context = context;
        _dbSet = context.Set<T>();
    }
    
    public virtual async Task<T?> GetByIdAsync(Guid id)
    {
        return await _dbSet.FindAsync(id);
    }
    
    public virtual async Task<IEnumerable<T>> GetAllAsync()
    {
        return await _dbSet.ToListAsync();
    }
    
    public virtual async Task<IEnumerable<T>> FindAsync(Expression<Func<T, bool>> predicate)
    {
        return await _dbSet.Where(predicate).ToListAsync();
    }
    
    public virtual async Task<PagedResult<T>> GetPagedAsync(int page, int pageSize, Expression<Func<T, bool>>? predicate = null)
    {
        var query = _dbSet.AsQueryable();
        
        if (predicate != null)
        {
            query = query.Where(predicate);
        }
        
        var totalCount = await query.CountAsync();
        var items = await query
            .Skip((page - 1) * pageSize)
            .Take(pageSize)
            .ToListAsync();
        
        return new PagedResult<T>
        {
            Items = items,
            TotalCount = totalCount,
            Page = page,
            PageSize = pageSize,
            TotalPages = (int)Math.Ceiling(totalCount / (double)pageSize)
        };
    }
    
    public virtual async Task<T> AddAsync(T entity)
    {
        await _dbSet.AddAsync(entity);
        return entity;
    }
    
    public virtual async Task UpdateAsync(T entity)
    {
        _dbSet.Update(entity);
        await Task.CompletedTask;
    }
    
    public virtual async Task DeleteAsync(T entity)
    {
        _dbSet.Remove(entity);
        await Task.CompletedTask;
    }
}
```

#### 4. ä¸šåŠ¡æœåŠ¡å®ç°
```csharp
// ToDoListArea.Core/Services/TaskService.cs
public class TaskService : ITaskService
{
    private readonly IUnitOfWork _unitOfWork;
    private readonly IMapper _mapper;
    private readonly ILogger<TaskService> _logger;
    
    public TaskService(IUnitOfWork unitOfWork, IMapper mapper, ILogger<TaskService> logger)
    {
        _unitOfWork = unitOfWork;
        _mapper = mapper;
        _logger = logger;
    }
    
    public async Task<TaskDto> CreateTaskAsync(CreateTaskRequest request)
    {
        _logger.LogInformation("Creating task: {Title}", request.Title);
        
        // éªŒè¯è¯·æ±‚
        var validator = new CreateTaskRequestValidator();
        var validationResult = await validator.ValidateAsync(request);
        if (!validationResult.IsValid)
        {
            throw new ValidationException(validationResult.Errors);
        }
        
        // æ£€æŸ¥æ—¶é—´å†²çª
        if (request.StartTime.HasValue && request.EndTime.HasValue)
        {
            var hasConflict = await CheckTimeConflictAsync(request.UserId, request.StartTime.Value, request.EndTime.Value);
            if (hasConflict)
            {
                throw new BusinessException("ä»»åŠ¡æ—¶é—´ä¸ç°æœ‰ä»»åŠ¡å†²çª");
            }
        }
        
        // åˆ›å»ºä»»åŠ¡å®ä½“
        var task = _mapper.Map<TaskItem>(request);
        task.Id = Guid.NewGuid();
        task.CreatedAt = DateTime.UtcNow;
        task.UpdatedAt = DateTime.UtcNow;
        
        // ä¿å­˜åˆ°æ•°æ®åº“
        await _unitOfWork.Tasks.AddAsync(task);
        await _unitOfWork.SaveChangesAsync();
        
        _logger.LogInformation("Task created successfully: {TaskId}", task.Id);
        
        return _mapper.Map<TaskDto>(task);
    }
    
    public async Task<PagedResult<TaskDto>> GetTasksAsync(TaskQueryRequest request)
    {
        _logger.LogInformation("Getting tasks for user: {UserId}", request.UserId);
        
        Expression<Func<TaskItem, bool>> predicate = t => t.UserId == request.UserId;
        
        // åº”ç”¨ç­›é€‰æ¡ä»¶
        if (request.Status.HasValue)
        {
            predicate = predicate.And(t => t.Status == request.Status.Value);
        }
        
        if (request.Priority.HasValue)
        {
            predicate = predicate.And(t => t.Priority == request.Priority.Value);
        }
        
        if (request.CategoryId.HasValue)
        {
            predicate = predicate.And(t => t.CategoryId == request.CategoryId.Value);
        }
        
        if (request.StartDate.HasValue)
        {
            predicate = predicate.And(t => t.StartTime >= request.StartDate.Value);
        }
        
        if (request.EndDate.HasValue)
        {
            predicate = predicate.And(t => t.EndTime <= request.EndDate.Value);
        }
        
        if (!string.IsNullOrEmpty(request.Search))
        {
            predicate = predicate.And(t => t.Title.Contains(request.Search) || 
                                          (t.Description != null && t.Description.Contains(request.Search)));
        }
        
        var result = await _unitOfWork.Tasks.GetPagedAsync(request.Page, request.PageSize, predicate);
        
        return new PagedResult<TaskDto>
        {
            Items = _mapper.Map<List<TaskDto>>(result.Items),
            TotalCount = result.TotalCount,
            Page = result.Page,
            PageSize = result.PageSize,
            TotalPages = result.TotalPages
        };
    }
    
    private async Task<bool> CheckTimeConflictAsync(Guid userId, DateTime startTime, DateTime endTime)
    {
        return await _unitOfWork.Tasks.AnyAsync(t => 
            t.UserId == userId &&
            t.StartTime < endTime &&
            t.EndTime > startTime);
    }
}
```

#### 5. APIæ§åˆ¶å™¨å®ç°
```csharp
// ToDoListArea.API/Controllers/TasksController.cs
[ApiController]
[Route("api/v1/[controller]")]
[Authorize]
public class TasksController : ControllerBase
{
    private readonly ITaskService _taskService;
    private readonly ILogger<TasksController> _logger;
    
    public TasksController(ITaskService taskService, ILogger<TasksController> logger)
    {
        _taskService = taskService;
        _logger = logger;
    }
    
    /// <summary>
    /// åˆ›å»ºæ–°ä»»åŠ¡
    /// </summary>
    /// <param name="request">ä»»åŠ¡åˆ›å»ºè¯·æ±‚</param>
    /// <returns>åˆ›å»ºçš„ä»»åŠ¡ä¿¡æ¯</returns>
    [HttpPost]
    [ProducesResponseType(typeof(ApiResponse<TaskDto>), StatusCodes.Status201Created)]
    [ProducesResponseType(typeof(ApiResponse), StatusCodes.Status400BadRequest)]
    public async Task<ActionResult<ApiResponse<TaskDto>>> CreateTask([FromBody] CreateTaskRequest request)
    {
        try
        {
            request.UserId = GetCurrentUserId();
            var task = await _taskService.CreateTaskAsync(request);
            
            return CreatedAtAction(
                nameof(GetTask),
                new { id = task.Id },
                ApiResponse<TaskDto>.Success(task, "ä»»åŠ¡åˆ›å»ºæˆåŠŸ"));
        }
        catch (ValidationException ex)
        {
            return BadRequest(ApiResponse.Error("VALIDATION_ERROR", ex.Message));
        }
        catch (BusinessException ex)
        {
            return BadRequest(ApiResponse.Error("BUSINESS_ERROR", ex.Message));
        }
    }
    
    /// <summary>
    /// è·å–ä»»åŠ¡åˆ—è¡¨
    /// </summary>
    /// <param name="request">æŸ¥è¯¢å‚æ•°</param>
    /// <returns>ä»»åŠ¡åˆ—è¡¨</returns>
    [HttpGet]
    [ProducesResponseType(typeof(ApiResponse<PagedResult<TaskDto>>), StatusCodes.Status200OK)]
    public async Task<ActionResult<ApiResponse<PagedResult<TaskDto>>>> GetTasks([FromQuery] TaskQueryRequest request)
    {
        request.UserId = GetCurrentUserId();
        var tasks = await _taskService.GetTasksAsync(request);
        
        return Ok(ApiResponse<PagedResult<TaskDto>>.Success(tasks));
    }
    
    /// <summary>
    /// è·å–ä»»åŠ¡è¯¦æƒ…
    /// </summary>
    /// <param name="id">ä»»åŠ¡ID</param>
    /// <returns>ä»»åŠ¡è¯¦æƒ…</returns>
    [HttpGet("{id:guid}")]
    [ProducesResponseType(typeof(ApiResponse<TaskDto>), StatusCodes.Status200OK)]
    [ProducesResponseType(typeof(ApiResponse), StatusCodes.Status404NotFound)]
    public async Task<ActionResult<ApiResponse<TaskDto>>> GetTask(Guid id)
    {
        var task = await _taskService.GetTaskAsync(id);
        
        if (task == null)
        {
            return NotFound(ApiResponse.Error("TASK_NOT_FOUND", "ä»»åŠ¡ä¸å­˜åœ¨"));
        }
        
        return Ok(ApiResponse<TaskDto>.Success(task));
    }
    
    private Guid GetCurrentUserId()
    {
        var userIdClaim = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;
        return Guid.Parse(userIdClaim!);
    }
}
```

---

## ğŸ“ å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | å˜æ›´äºº | å®¡æ‰¹äºº |
|------|------|----------|--------|--------|
| v2.0 | 2025-07-29 | ä¼ä¸šçº§å¼€å‘å®æ–½æŒ‡å—é‡æ„ï¼Œæä¾›è¯¦ç»†çš„å¼€å‘æ­¥éª¤å’Œæœ€ä½³å®è·µ | æŠ€æœ¯å›¢é˜Ÿ | æŠ€æœ¯è´Ÿè´£äºº |
| v1.0 | 2025-07-26 | åˆå§‹å¼€å‘æŒ‡å—æ–‡æ¡£åˆ›å»º | å¼€å‘å›¢é˜Ÿ | æ¶æ„å¸ˆ |

### ğŸ”„ ä¸‹æ¬¡æ›´æ–°è®¡åˆ’
- **è®¡åˆ’æ—¥æœŸ**: 2025-08-12
- **æ›´æ–°å†…å®¹**: æ ¹æ®å¼€å‘å®è·µä¼˜åŒ–æŒ‡å—å†…å®¹
- **è´Ÿè´£äºº**: æŠ€æœ¯è´Ÿè´£äºº

---

**æ–‡æ¡£ç»´æŠ¤**: æœ¬æ–‡æ¡£ç”±æŠ€æœ¯å›¢é˜Ÿç»´æŠ¤ï¼Œæ ¹æ®å¼€å‘è¿›å±•æŒç»­æ›´æ–°
**å®æ–½åé¦ˆ**: å¼€å‘è¿‡ç¨‹ä¸­çš„é—®é¢˜å’Œæ”¹è¿›å»ºè®®è¯·åŠæ—¶åé¦ˆ
**ç‰ˆæƒå£°æ˜**: æœ¬æ–‡æ¡£ä¸ºToDoListAreaé¡¹ç›®å†…éƒ¨æ–‡æ¡£ï¼Œæœªç»æˆæƒä¸å¾—å¤–ä¼ 
