---
**æ–‡æ¡£ç±»å‹**: è¯¦ç»†è®¾è®¡è§„æ ¼ä¹¦
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**åˆ›å»ºæ—¥æœŸ**: 2025-07-29
**æœ€åæ›´æ–°**: 2025-07-29
**æ–‡æ¡£æ‰€æœ‰è€…**: æŠ€æœ¯è´Ÿè´£äºº
**å®¡æ‰¹çŠ¶æ€**: å·²å®¡æ‰¹
**å˜æ›´è¯´æ˜**: ä¼ä¸šçº§è¯¦ç»†è®¾è®¡é‡æ„ï¼Œå®Œå–„ç³»ç»Ÿè®¾è®¡å’Œæ•°æ®åº“è®¾è®¡
---

# ğŸ“ ToDoListAreaè¯¦ç»†è®¾è®¡è§„æ ¼ä¹¦

## ğŸ”— ç›¸å…³æ–‡æ¡£é“¾æ¥

- [æ–‡æ¡£ä½“ç³»ä¸»ç´¢å¼•](./00_æ–‡æ¡£ä½“ç³»ä¸»ç´¢å¼•.md) - æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ä½“ç³»
- [æŠ€æœ¯é€‰å‹ä¸æ¶æ„è®¾è®¡](./03_æŠ€æœ¯é€‰å‹ä¸æ¶æ„è®¾è®¡.md) - æŸ¥çœ‹æŠ€æœ¯æ¶æ„
- [APIæ¥å£è®¾è®¡è§„èŒƒ](./05_APIæ¥å£è®¾è®¡è§„èŒƒ.md) - æŸ¥çœ‹æ¥å£è®¾è®¡
- [å¼€å‘å®æ–½æŒ‡å—](./06_å¼€å‘å®æ–½æŒ‡å—.md) - æŸ¥çœ‹å®æ–½æ­¥éª¤

## ğŸ“‹ ç›®å½•

- [ç³»ç»Ÿæ¨¡å—è®¾è®¡](#ç³»ç»Ÿæ¨¡å—è®¾è®¡)
- [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
- [æ ¸å¿ƒç®—æ³•è®¾è®¡](#æ ¸å¿ƒç®—æ³•è®¾è®¡)
- [å®‰å…¨è®¾è®¡](#å®‰å…¨è®¾è®¡)
- [æ€§èƒ½è®¾è®¡](#æ€§èƒ½è®¾è®¡)
- [æ¥å£è®¾è®¡](#æ¥å£è®¾è®¡)

---

## ğŸ§© ç³»ç»Ÿæ¨¡å—è®¾è®¡

### ğŸ“Š æ¨¡å—æ¶æ„å›¾

```mermaid
graph TB
    subgraph "å‰ç«¯æ¨¡å—"
        A[è®¤è¯æ¨¡å—] --> B[ç”¨æˆ·ç®¡ç†]
        C[ä»»åŠ¡ç®¡ç†] --> D[ç”˜ç‰¹å›¾æ¨¡å—]
        E[æé†’æ¨¡å—] --> F[æ•°æ®åˆ†æ]
        G[è®¾ç½®æ¨¡å—] --> H[é€šç”¨ç»„ä»¶]
    end
    
    subgraph "åç«¯æœåŠ¡"
        I[ç”¨æˆ·æœåŠ¡] --> J[è®¤è¯æœåŠ¡]
        K[ä»»åŠ¡æœåŠ¡] --> L[ç”˜ç‰¹å›¾æœåŠ¡]
        M[æé†’æœåŠ¡] --> N[AIè°ƒåº¦æœåŠ¡]
        O[æ•°æ®åˆ†ææœåŠ¡] --> P[é€šçŸ¥æœåŠ¡]
    end
    
    subgraph "æ•°æ®å±‚"
        Q[ç”¨æˆ·æ•°æ®] --> R[ä»»åŠ¡æ•°æ®]
        S[æ—¶é—´çº¿æ•°æ®] --> T[æé†’æ•°æ®]
        U[åˆ†ææ•°æ®] --> V[ç³»ç»Ÿé…ç½®]
    end
    
    A --> I
    C --> K
    D --> L
    E --> M
    F --> O
    I --> Q
    K --> R
    L --> S
    M --> T
    O --> U
```

### ğŸ”§ æ ¸å¿ƒæ¨¡å—è¯¦ç»†è®¾è®¡

#### 1. ç”¨æˆ·è®¤è¯æ¨¡å—
**æ¨¡å—èŒè´£**: ç”¨æˆ·èº«ä»½è®¤è¯ã€æƒé™ç®¡ç†ã€ä¼šè¯æ§åˆ¶
**æŠ€æœ¯å®ç°**: JWT + OAuth 2.0ï¼ˆå½“å‰å®ç°çŠ¶æ€ï¼šä»…å¯ç”¨JWTï¼›Identityæœªè½åœ°ï¼‰

**æ ¸å¿ƒç±»è®¾è®¡**:
```csharp
// ç”¨æˆ·å®ä½“
public class User : IdentityUser<Guid>
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string AvatarUrl { get; set; }
    public string Timezone { get; set; }
    public string Language { get; set; }
    public bool IsActive { get; set; }
    public DateTime CreatedAt { get; set; }
    public DateTime UpdatedAt { get; set; }
    
    // å¯¼èˆªå±æ€§
    public virtual ICollection<Task> Tasks { get; set; }
    public virtual UserProfile Profile { get; set; }
}

// è®¤è¯æœåŠ¡æ¥å£
public interface IAuthService
{
    Task<AuthResult> RegisterAsync(RegisterRequest request);
    Task<AuthResult> LoginAsync(LoginRequest request);
    Task<AuthResult> RefreshTokenAsync(string refreshToken);
    Task<bool> LogoutAsync(string userId);
    Task<bool> ChangePasswordAsync(ChangePasswordRequest request);
}
```

**å®‰å…¨ç‰¹æ€§**:
- JWTä»¤ç‰Œæœ‰æ•ˆæœŸ24å°æ—¶ï¼Œåˆ·æ–°ä»¤ç‰Œ7å¤©
- å¯†ç å¼ºåº¦è¦æ±‚ï¼š8ä½ä»¥ä¸Šï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦
- æ”¯æŒå¤šè®¾å¤‡ç™»å½•ï¼Œæœ€å¤š5ä¸ªæ´»è·ƒä¼šè¯
- å¼‚å¸¸ç™»å½•æ£€æµ‹å’Œè´¦æˆ·é”å®šæœºåˆ¶

#### 2. ä»»åŠ¡ç®¡ç†æ¨¡å—
**æ¨¡å—èŒè´£**: ä»»åŠ¡CRUDæ“ä½œã€æœç´¢ç­›é€‰ã€åˆ†ç±»ç®¡ç†ã€ä¾èµ–å…³ç³»
**æŠ€æœ¯å®ç°**: Entity Framework Core + Repository Pattern

**æ ¸å¿ƒç±»è®¾è®¡**:
```csharp
// ä»»åŠ¡å®ä½“
public class Task
{
    public Guid Id { get; set; }
    public Guid UserId { get; set; }
    public Guid? ParentTaskId { get; set; }
    public Guid? CategoryId { get; set; }
    
    public string Title { get; set; }
    public string Description { get; set; }
    public TaskStatus Status { get; set; }
    public TaskPriority Priority { get; set; }
    
    public DateTime? StartTime { get; set; }
    public DateTime? EndTime { get; set; }
    public int? EstimatedDuration { get; set; }
    public int? ActualDuration { get; set; }
    
    public decimal CompletionPercentage { get; set; }
    public bool IsRecurring { get; set; }
    public string RecurrencePattern { get; set; }
    public string Tags { get; set; }
    
    public DateTime CreatedAt { get; set; }
    public DateTime UpdatedAt { get; set; }
    
    // å¯¼èˆªå±æ€§
    public virtual User User { get; set; }
    public virtual Task ParentTask { get; set; }
    public virtual ICollection<Task> SubTasks { get; set; }
    public virtual TaskCategory Category { get; set; }
}

// ä»»åŠ¡æœåŠ¡æ¥å£
public interface ITaskService
{
    Task<TaskDto> CreateTaskAsync(CreateTaskRequest request);
    Task<TaskDto> UpdateTaskAsync(Guid taskId, UpdateTaskRequest request);
    Task<bool> DeleteTaskAsync(Guid taskId);
    Task<TaskDto> GetTaskAsync(Guid taskId);
    Task<PagedResult<TaskDto>> GetTasksAsync(TaskQueryRequest request);
    Task<List<TaskDto>> SearchTasksAsync(string keyword);
}
```

**ä¸šåŠ¡è§„åˆ™**:
- ä»»åŠ¡æ ‡é¢˜å¿…å¡«ï¼Œæœ€å¤§255å­—ç¬¦
- å¼€å§‹æ—¶é—´ä¸èƒ½æ™šäºç»“æŸæ—¶é—´
- å­ä»»åŠ¡çš„æ—¶é—´èŒƒå›´å¿…é¡»åœ¨çˆ¶ä»»åŠ¡èŒƒå›´å†…
- ä»»åŠ¡åˆ é™¤é‡‡ç”¨è½¯åˆ é™¤æœºåˆ¶
- æ”¯æŒæ‰¹é‡æ“ä½œï¼Œæœ€å¤š100ä¸ªä»»åŠ¡

#### 3. ç”˜ç‰¹å›¾æ¨¡å—
**æ¨¡å—èŒè´£**: æ—¶é—´çº¿å¯è§†åŒ–ã€ä»»åŠ¡ä¾èµ–å…³ç³»ã€æ‹–æ‹½äº¤äº’
**æŠ€æœ¯å®ç°**: D3.js + React + SignalRå®æ—¶åŒæ­¥

**æ ¸å¿ƒç±»è®¾è®¡**:
```csharp
// ç”˜ç‰¹å›¾æ•°æ®å®ä½“
public class GanttData
{
    public Guid Id { get; set; }
    public Guid UserId { get; set; }
    public Guid TaskId { get; set; }
    
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public decimal Progress { get; set; }
    public string Dependencies { get; set; } // JSONæ ¼å¼
    public string Resources { get; set; } // JSONæ ¼å¼
    
    public DateTime CreatedAt { get; set; }
    public DateTime UpdatedAt { get; set; }
    
    // å¯¼èˆªå±æ€§
    public virtual User User { get; set; }
    public virtual Task Task { get; set; }
}

// ç”˜ç‰¹å›¾æœåŠ¡æ¥å£
public interface IGanttService
{
    Task<GanttChartDto> GetGanttDataAsync(Guid userId, DateTime startDate, DateTime endDate);
    Task<bool> UpdateTaskTimeAsync(Guid taskId, DateTime startTime, DateTime endTime);
    Task<ConflictCheckResult> CheckTimeConflictAsync(Guid userId, DateTime startTime, DateTime endTime);
    Task<List<TaskDto>> GetCriticalPathAsync(Guid userId);
}
```

**ç®—æ³•è®¾è®¡**:
- å…³é”®è·¯å¾„ç®—æ³•ï¼šè®¡ç®—é¡¹ç›®æœ€çŸ­å®Œæˆæ—¶é—´
- å†²çªæ£€æµ‹ç®—æ³•ï¼šæ£€æµ‹ä»»åŠ¡æ—¶é—´é‡å 
- ä¾èµ–å…³ç³»ç®—æ³•ï¼šéªŒè¯ä»»åŠ¡ä¾èµ–çš„åˆç†æ€§
- èµ„æºåˆ†é…ç®—æ³•ï¼šä¼˜åŒ–èµ„æºä½¿ç”¨æ•ˆç‡

#### 4. AIæ™ºèƒ½è°ƒåº¦æ¨¡å—
**æ¨¡å—èŒè´£**: å†²çªæ£€æµ‹ã€æ™ºèƒ½è°ƒæ•´ã€å­¦ä¹ ä¼˜åŒ–
**æŠ€æœ¯å®ç°**: Azure OpenAI + è‡ªå®šä¹‰ç®—æ³•

**æ ¸å¿ƒç±»è®¾è®¡**:
```csharp
// AIè°ƒåº¦æœåŠ¡æ¥å£
public interface IAIScheduleService
{
    Task<ConflictDetectionResult> DetectConflictsAsync(Guid userId);
    Task<List<ScheduleAdjustment>> GenerateAdjustmentsAsync(ConflictDetectionResult conflicts);
    Task<bool> ApplyAdjustmentAsync(Guid userId, ScheduleAdjustment adjustment);
    Task<ScheduleOptimizationResult> OptimizeScheduleAsync(Guid userId, OptimizationRequest request);
}

// å†²çªæ£€æµ‹ç»“æœ
public class ConflictDetectionResult
{
    public List<TimeConflict> TimeConflicts { get; set; }
    public List<ResourceConflict> ResourceConflicts { get; set; }
    public List<DependencyConflict> DependencyConflicts { get; set; }
    public ConflictSeverity Severity { get; set; }
}

// è°ƒåº¦è°ƒæ•´å»ºè®®
public class ScheduleAdjustment
{
    public Guid TaskId { get; set; }
    public AdjustmentType Type { get; set; }
    public DateTime NewStartTime { get; set; }
    public DateTime NewEndTime { get; set; }
    public string Reason { get; set; }
    public decimal ConfidenceScore { get; set; }
}
```

**AIç®—æ³•è®¾è®¡**:
- é—ä¼ ç®—æ³•ï¼šå…¨å±€ä¼˜åŒ–ä»»åŠ¡è°ƒåº¦
- å¯å‘å¼ç®—æ³•ï¼šå¿«é€Ÿå†²çªè§£å†³
- æœºå™¨å­¦ä¹ ï¼šç”¨æˆ·è¡Œä¸ºæ¨¡å¼å­¦ä¹ 
- å¼ºåŒ–å­¦ä¹ ï¼šè°ƒåº¦ç­–ç•¥æŒç»­ä¼˜åŒ–

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### ğŸ“Š æ•°æ®åº“æ¶æ„å›¾

```mermaid
erDiagram
    users ||--o{ tasks : creates
    users ||--o{ user_profiles : has
    users ||--o{ user_sessions : has
    users ||--o{ reminders : sets
    
    tasks ||--o{ task_details : has
    tasks ||--o{ task_dependencies : depends_on
    tasks ||--o{ gantt_data : visualized_in
    tasks ||--o{ time_blocks : scheduled_in
    
    task_categories ||--o{ tasks : categorizes
    reminders ||--o{ reminder_history : generates
    
    users {
        uniqueidentifier id PK
        varchar email UK
        varchar phone UK
        varchar password_hash
        varchar name
        varchar avatar_url
        varchar status
        bit email_verified
        datetime2 created_at
    }
    
    tasks {
        uniqueidentifier id PK
        uniqueidentifier user_id FK
        uniqueidentifier parent_task_id FK
        uniqueidentifier category_id FK
        varchar title
        nvarchar description
        varchar status
        varchar priority
        datetime2 start_time
        datetime2 end_time
        decimal completion_percentage
        datetime2 created_at
    }
```

### ğŸ”§ æ ¸å¿ƒè¡¨è®¾è®¡

#### ç”¨æˆ·ç®¡ç†è¡¨ç»„
**usersè¡¨** - ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
```sql
CREATE TABLE users (
    id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
    email VARCHAR(255) UNIQUE NOT NULL,
    phone VARCHAR(20) UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    name VARCHAR(100) NOT NULL,
    avatar_url NVARCHAR(MAX),
    status VARCHAR(20) NOT NULL DEFAULT 'active',
    email_verified BIT NOT NULL DEFAULT 0,
    phone_verified BIT NOT NULL DEFAULT 0,
    last_login_at DATETIME2,
    created_at DATETIME2 NOT NULL DEFAULT GETDATE(),
    updated_at DATETIME2 NOT NULL DEFAULT GETDATE()
);

-- ç´¢å¼•è®¾è®¡
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_status ON users(status);
CREATE INDEX idx_users_created_at ON users(created_at);
```

**user_profilesè¡¨** - ç”¨æˆ·è¯¦ç»†èµ„æ–™
```sql
CREATE TABLE user_profiles (
    id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
    user_id UNIQUEIDENTIFIER NOT NULL,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    timezone VARCHAR(50) NOT NULL DEFAULT 'UTC',
    language VARCHAR(10) NOT NULL DEFAULT 'zh-CN',
    date_format VARCHAR(20) NOT NULL DEFAULT 'YYYY-MM-DD',
    time_format VARCHAR(10) NOT NULL DEFAULT '24h',
    notification_preferences NVARCHAR(MAX),
    theme_preferences NVARCHAR(MAX),
    created_at DATETIME2 NOT NULL DEFAULT GETDATE(),
    updated_at DATETIME2 NOT NULL DEFAULT GETDATE(),
    
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

#### ä»»åŠ¡ç®¡ç†è¡¨ç»„
**tasksè¡¨** - ä»»åŠ¡æ ¸å¿ƒä¿¡æ¯
```sql
CREATE TABLE tasks (
    id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
    user_id UNIQUEIDENTIFIER NOT NULL,
    parent_task_id UNIQUEIDENTIFIER,
    category_id UNIQUEIDENTIFIER,
    title VARCHAR(255) NOT NULL,
    description NVARCHAR(MAX),
    status VARCHAR(20) NOT NULL DEFAULT 'pending',
    priority VARCHAR(10) NOT NULL DEFAULT 'medium',
    start_time DATETIME2,
    end_time DATETIME2,
    estimated_duration INTEGER,
    actual_duration INTEGER,
    completion_percentage DECIMAL(5,2) NOT NULL DEFAULT 0.00,
    is_recurring BIT NOT NULL DEFAULT 0,
    recurrence_pattern NVARCHAR(MAX),
    tags NVARCHAR(MAX),
    attachments NVARCHAR(MAX),
    completed_at DATETIME2,
    created_at DATETIME2 NOT NULL DEFAULT GETDATE(),
    updated_at DATETIME2 NOT NULL DEFAULT GETDATE(),
    
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (parent_task_id) REFERENCES tasks(id) ON DELETE NO ACTION,
    FOREIGN KEY (category_id) REFERENCES task_categories(id) ON DELETE SET NULL
);

-- å¤åˆç´¢å¼•è®¾è®¡
CREATE INDEX idx_tasks_user_status_priority ON tasks(user_id, status, priority);
CREATE INDEX idx_tasks_time_range ON tasks(start_time, end_time);
CREATE INDEX idx_tasks_parent ON tasks(parent_task_id);
```

### ğŸ“ˆ æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–

#### ç´¢å¼•ç­–ç•¥
1. **ä¸»é”®ç´¢å¼•**: æ‰€æœ‰è¡¨ä½¿ç”¨UNIQUEIDENTIFIERä¸»é”®
2. **å”¯ä¸€ç´¢å¼•**: é‚®ç®±ã€æ‰‹æœºå·ç­‰å”¯ä¸€å­—æ®µ
3. **å¤åˆç´¢å¼•**: å¸¸ç”¨æŸ¥è¯¢æ¡ä»¶çš„ç»„åˆç´¢å¼•
4. **è¦†ç›–ç´¢å¼•**: åŒ…å«æŸ¥è¯¢æ‰€éœ€æ‰€æœ‰å­—æ®µçš„ç´¢å¼•
5. **åˆ†åŒºç´¢å¼•**: å¤§è¡¨æŒ‰æ—¶é—´åˆ†åŒºçš„ç´¢å¼•

#### æŸ¥è¯¢ä¼˜åŒ–
1. **åˆ†é¡µæŸ¥è¯¢**: ä½¿ç”¨OFFSET/FETCHè¿›è¡Œé«˜æ•ˆåˆ†é¡µ
2. **æ¡ä»¶ç­›é€‰**: åœ¨WHEREå­å¥ä¸­ä½¿ç”¨ç´¢å¼•å­—æ®µ
3. **è¿æ¥ä¼˜åŒ–**: åˆç†ä½¿ç”¨INNER/LEFT JOIN
4. **å­æŸ¥è¯¢ä¼˜åŒ–**: é¿å…ç›¸å…³å­æŸ¥è¯¢ï¼Œä½¿ç”¨EXISTS
5. **ç»Ÿè®¡ä¿¡æ¯**: å®šæœŸæ›´æ–°è¡¨ç»Ÿè®¡ä¿¡æ¯

#### æ•°æ®å½’æ¡£ç­–ç•¥
1. **å†å²æ•°æ®**: 6ä¸ªæœˆä»¥ä¸Šçš„æ•°æ®è¿ç§»åˆ°å†å²è¡¨
2. **æ—¥å¿—æ•°æ®**: 3ä¸ªæœˆä»¥ä¸Šçš„æ—¥å¿—æ•°æ®å‹ç¼©å­˜å‚¨
3. **åˆ é™¤æ•°æ®**: è½¯åˆ é™¤æ•°æ®å®šæœŸç‰©ç†åˆ é™¤
4. **å¤‡ä»½ç­–ç•¥**: æ¯æ—¥å¢é‡å¤‡ä»½ï¼Œæ¯å‘¨å…¨é‡å¤‡ä»½

---

## ğŸ§® æ ¸å¿ƒç®—æ³•è®¾è®¡

### ğŸ¯ AIæ™ºèƒ½è°ƒåº¦ç®—æ³•

#### å†²çªæ£€æµ‹ç®—æ³•
```csharp
public class ConflictDetectionAlgorithm
{
    public ConflictDetectionResult DetectConflicts(List<Task> tasks)
    {
        var result = new ConflictDetectionResult();
        
        // æ—¶é—´å†²çªæ£€æµ‹
        for (int i = 0; i < tasks.Count; i++)
        {
            for (int j = i + 1; j < tasks.Count; j++)
            {
                if (HasTimeOverlap(tasks[i], tasks[j]))
                {
                    result.TimeConflicts.Add(new TimeConflict
                    {
                        Task1 = tasks[i],
                        Task2 = tasks[j],
                        OverlapDuration = CalculateOverlap(tasks[i], tasks[j])
                    });
                }
            }
        }
        
        // ä¾èµ–å…³ç³»å†²çªæ£€æµ‹
        result.DependencyConflicts = DetectDependencyConflicts(tasks);
        
        // èµ„æºå†²çªæ£€æµ‹
        result.ResourceConflicts = DetectResourceConflicts(tasks);
        
        return result;
    }
    
    private bool HasTimeOverlap(Task task1, Task task2)
    {
        return task1.StartTime < task2.EndTime && task2.StartTime < task1.EndTime;
    }
}
```

#### æ™ºèƒ½è°ƒæ•´ç®—æ³•
```csharp
public class ScheduleOptimizationAlgorithm
{
    public List<ScheduleAdjustment> OptimizeSchedule(List<Task> tasks, OptimizationGoal goal)
    {
        switch (goal)
        {
            case OptimizationGoal.MinimizeTime:
                return MinimizeProjectTime(tasks);
            case OptimizationGoal.BalanceWorkload:
                return BalanceWorkload(tasks);
            case OptimizationGoal.MaximizeEfficiency:
                return MaximizeEfficiency(tasks);
            default:
                return new List<ScheduleAdjustment>();
        }
    }
    
    private List<ScheduleAdjustment> MinimizeProjectTime(List<Task> tasks)
    {
        // ä½¿ç”¨å…³é”®è·¯å¾„æ³•ä¼˜åŒ–é¡¹ç›®æ—¶é—´
        var criticalPath = CalculateCriticalPath(tasks);
        var adjustments = new List<ScheduleAdjustment>();
        
        foreach (var task in criticalPath)
        {
            // å°è¯•å¹¶è¡ŒåŒ–éå…³é”®è·¯å¾„ä»»åŠ¡
            var parallelTasks = FindParallelizableTasks(task, tasks);
            adjustments.AddRange(CreateParallelAdjustments(parallelTasks));
        }
        
        return adjustments;
    }
}
```

### ğŸ“Š ç”˜ç‰¹å›¾æ¸²æŸ“ç®—æ³•

#### æ—¶é—´è½´è®¡ç®—ç®—æ³•
```typescript
class GanttTimelineCalculator {
    calculateTimeline(tasks: Task[], viewType: ViewType): TimelineData {
        const timeline = {
            startDate: this.findEarliestDate(tasks),
            endDate: this.findLatestDate(tasks),
            timeUnits: this.calculateTimeUnits(viewType),
            taskBars: this.calculateTaskBars(tasks)
        };
        
        return timeline;
    }
    
    private calculateTaskBars(tasks: Task[]): TaskBar[] {
        return tasks.map(task => ({
            id: task.id,
            x: this.dateToPixel(task.startTime),
            width: this.durationToPixel(task.duration),
            y: this.taskToRow(task),
            height: this.getBarHeight(),
            color: this.getTaskColor(task.priority),
            dependencies: this.calculateDependencyLines(task)
        }));
    }
    
    private calculateDependencyLines(task: Task): DependencyLine[] {
        return task.dependencies.map(dep => ({
            fromX: this.dateToPixel(dep.fromTask.endTime),
            fromY: this.taskToRow(dep.fromTask),
            toX: this.dateToPixel(task.startTime),
            toY: this.taskToRow(task),
            type: dep.type
        }));
    }
}
```

### ğŸ” æœç´¢ç®—æ³•ä¼˜åŒ–

#### å…¨æ–‡æœç´¢ç®—æ³•
```csharp
public class TaskSearchService
{
    public async Task<List<TaskDto>> SearchTasksAsync(string keyword, SearchOptions options)
    {
        var query = _context.Tasks.AsQueryable();
        
        // åˆ†è¯å¤„ç†
        var keywords = TokenizeKeyword(keyword);
        
        // å¤šå­—æ®µæœç´¢
        query = query.Where(t => 
            keywords.Any(k => t.Title.Contains(k)) ||
            keywords.Any(k => t.Description.Contains(k)) ||
            keywords.Any(k => t.Tags.Contains(k))
        );
        
        // ç›¸å…³æ€§è¯„åˆ†
        var results = await query
            .Select(t => new TaskSearchResult
            {
                Task = t,
                RelevanceScore = CalculateRelevanceScore(t, keywords)
            })
            .OrderByDescending(r => r.RelevanceScore)
            .Take(options.MaxResults)
            .ToListAsync();
        
        return results.Select(r => r.Task).ToList();
    }
    
    private decimal CalculateRelevanceScore(Task task, List<string> keywords)
    {
        decimal score = 0;
        
        foreach (var keyword in keywords)
        {
            // æ ‡é¢˜åŒ¹é…æƒé‡æœ€é«˜
            if (task.Title.Contains(keyword, StringComparison.OrdinalIgnoreCase))
                score += 10;
            
            // æè¿°åŒ¹é…æƒé‡ä¸­ç­‰
            if (task.Description?.Contains(keyword, StringComparison.OrdinalIgnoreCase) == true)
                score += 5;
            
            // æ ‡ç­¾åŒ¹é…æƒé‡è¾ƒä½
            if (task.Tags?.Contains(keyword, StringComparison.OrdinalIgnoreCase) == true)
                score += 3;
        }
        
        return score;
    }
}
```

---

## ğŸ”’ å®‰å…¨è®¾è®¡

### ğŸ›¡ï¸ èº«ä»½è®¤è¯å®‰å…¨

#### JWTä»¤ç‰Œè®¾è®¡
```csharp
public class JwtTokenService
{
    public string GenerateAccessToken(User user)
    {
        var claims = new[]
        {
            new Claim(ClaimTypes.NameIdentifier, user.Id.ToString()),
            new Claim(ClaimTypes.Email, user.Email),
            new Claim(ClaimTypes.Name, user.UserName),
            new Claim("timezone", user.Profile?.Timezone ?? "UTC"),
            new Claim("language", user.Profile?.Language ?? "zh-CN")
        };
        
        var key = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(_jwtSettings.SecretKey));
        var credentials = new SigningCredentials(key, SecurityAlgorithms.HmacSha256);
        
        var token = new JwtSecurityToken(
            issuer: _jwtSettings.Issuer,
            audience: _jwtSettings.Audience,
            claims: claims,
            expires: DateTime.UtcNow.AddHours(_jwtSettings.ExpirationHours),
            signingCredentials: credentials
        );
        
        return new JwtSecurityTokenHandler().WriteToken(token);
    }
}
```

#### å¯†ç å®‰å…¨ç­–ç•¥
```csharp
public class PasswordSecurityService
{
    public bool ValidatePasswordStrength(string password)
    {
        var requirements = new[]
        {
            password.Length >= 8,                           // æœ€å°‘8ä½
            password.Any(char.IsUpper),                     // åŒ…å«å¤§å†™å­—æ¯
            password.Any(char.IsLower),                     // åŒ…å«å°å†™å­—æ¯
            password.Any(char.IsDigit),                     // åŒ…å«æ•°å­—
            password.Any(c => "!@#$%^&*()".Contains(c))     // åŒ…å«ç‰¹æ®Šå­—ç¬¦
        };
        
        return requirements.All(req => req);
    }
    
    public string HashPassword(string password)
    {
        return BCrypt.Net.BCrypt.HashPassword(password, BCrypt.Net.BCrypt.GenerateSalt(12));
    }
    
    public bool VerifyPassword(string password, string hash)
    {
        return BCrypt.Net.BCrypt.Verify(password, hash);
    }
}
```

### ğŸ” æ•°æ®å®‰å…¨ä¿æŠ¤

#### æ•æ„Ÿæ•°æ®åŠ å¯†
```csharp
public class DataEncryptionService
{
    public string EncryptSensitiveData(string data)
    {
        using (var aes = Aes.Create())
        {
            aes.Key = Convert.FromBase64String(_encryptionSettings.Key);
            aes.IV = Convert.FromBase64String(_encryptionSettings.IV);
            
            using (var encryptor = aes.CreateEncryptor())
            using (var msEncrypt = new MemoryStream())
            using (var csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
            using (var swEncrypt = new StreamWriter(csEncrypt))
            {
                swEncrypt.Write(data);
                return Convert.ToBase64String(msEncrypt.ToArray());
            }
        }
    }
}
```

#### SQLæ³¨å…¥é˜²æŠ¤
```csharp
public class SecureDataAccess
{
    public async Task<List<Task>> GetTasksByUserAsync(Guid userId, string searchTerm)
    {
        // ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥
        var sql = @"
            SELECT * FROM tasks 
            WHERE user_id = @userId 
            AND (title LIKE @searchTerm OR description LIKE @searchTerm)
            ORDER BY created_at DESC";
        
        var parameters = new[]
        {
            new SqlParameter("@userId", userId),
            new SqlParameter("@searchTerm", $"%{searchTerm}%")
        };
        
        return await _context.Tasks
            .FromSqlRaw(sql, parameters)
            .ToListAsync();
    }
}
```

---

## ğŸ“ å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | å˜æ›´äºº | å®¡æ‰¹äºº |
|------|------|----------|--------|--------|
| v2.0 | 2025-07-29 | ä¼ä¸šçº§è¯¦ç»†è®¾è®¡é‡æ„ï¼Œå®Œå–„ç³»ç»Ÿè®¾è®¡å’Œæ•°æ®åº“è®¾è®¡ | æŠ€æœ¯å›¢é˜Ÿ | æ¶æ„å¸ˆ |
| v1.0 | 2025-07-26 | åˆå§‹è¯¦ç»†è®¾è®¡æ–‡æ¡£åˆ›å»º | æŠ€æœ¯è´Ÿè´£äºº | é¡¹ç›®ç»ç† |

### ğŸ”„ ä¸‹æ¬¡æ›´æ–°è®¡åˆ’
- **è®¡åˆ’æ—¥æœŸ**: 2025-08-12
- **æ›´æ–°å†…å®¹**: æ ¹æ®å¼€å‘è¿›å±•ä¼˜åŒ–è®¾è®¡ç»†èŠ‚
- **è´Ÿè´£äºº**: æŠ€æœ¯è´Ÿè´£äºº

---

**æ–‡æ¡£ç»´æŠ¤**: æœ¬æ–‡æ¡£ç”±æŠ€æœ¯å›¢é˜Ÿç»´æŠ¤ï¼Œæ¯ä¸¤å‘¨å®¡æŸ¥è®¾è®¡å®ç°æƒ…å†µ
**è®¾è®¡å˜æ›´**: é‡å¤§è®¾è®¡å˜æ›´éœ€è¦é€šè¿‡æŠ€æœ¯è¯„å®¡å§”å‘˜ä¼š
**ç‰ˆæƒå£°æ˜**: æœ¬æ–‡æ¡£ä¸ºToDoListAreaé¡¹ç›®å†…éƒ¨æ–‡æ¡£ï¼Œæœªç»æˆæƒä¸å¾—å¤–ä¼ 
