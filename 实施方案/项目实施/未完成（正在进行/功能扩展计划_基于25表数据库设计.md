# ToDoList项目功能扩展计划 - 基于25表数据库设计

> **文档版本**: v2.1 (基于可行性评估优化)
> **创建日期**: 2025-08-04
> **更新日期**: 2025-08-08
> **制定原则**: 严格基于现有25个数据库表设计，充分利用已有架构，避免重复设计

---

## 📊 **项目现状概览**

### **技术栈**
- **后端**: ASP.NET Core 8.0 + Entity Framework Core + SQL Server
- **前端**: React 18 + TypeScript + Ant Design
- **数据库**: SQL Server (25个表完整设计)

### **当前已实现功能**
- ✅ 用户注册和登录功能（users表）
- ✅ 任务的基础CRUD操作（tasks表）
- ✅ 任务分类管理（task_categories表）
- ✅ 基础系统配置（system_configs, feature_flags表）

---

## 🔍 **数据库利用率现状分析**

### **当前利用情况（28% - 7/25表）**

#### **✅ 已使用表（7个）**
| 表名 | 使用状态 | 控制器 | 前端页面 | 利用程度 | 备注 |
|------|----------|--------|----------|----------|------|
| `users` | ✅ 完全使用 | UserController | Login/Register | 高 | 用户基础信息 |
| `tasks` | ✅ 完全使用 | TaskController | Dashboard/Gantt | 高 | 任务主表 |
| `task_categories` | ✅ 完全使用 | TaskCategoryController | Dashboard | 高 | 任务分类 |
| `system_configs` | ✅ 基础使用 | - | - | 低 | 系统配置 |
| `feature_flags` | ✅ 基础使用 | - | - | 低 | 功能开关 |
| `gantt_data` | 🔄 部分使用 | - | GanttPage | 低 | 数据源待修复 |
| `user_sessions` | 🔄 间接使用 | JWT中间件 | - | 低 | JWT会话管理 |

#### **❌ 未使用表（18个 - 72%）**

**用户扩展模块（3个表）**：
- `user_profiles` - 用户详细资料（姓名、时区、语言、主题偏好等）
- `user_oauth_accounts` - 第三方登录账户关联
- `notification_settings` - 用户通知偏好设置

**邀请系统（2个表）**：
- `invitation_codes` - 邀请码管理
- `invitation_code_usages` - 邀请码使用记录

**任务扩展模块（3个表）**：
- `task_details` - 任务详情扩展（检查清单、笔记、附件等）
- `task_dependencies` - 任务依赖关系管理
- `task_templates` - 任务模板系统

**时间线管理模块（3个表）**：
- `timeline_nodes` - 时间线节点
- `timeline_events` - 时间线事件
- `time_blocks` - 时间块管理

**提醒系统模块（3个表）**：
- `reminders` - 提醒主表
- `reminder_rules` - 智能提醒规则
- `reminder_history` - 提醒历史记录

**数据分析模块（3个表）**：
- `user_activities` - 用户活动记录
- `task_statistics` - 任务统计数据
- `productivity_metrics` - 生产力指标

**系统管理（1个表）**：
- `system_logs` - 系统操作日志

---

## 🎯 **数据库利用率提升目标（修订）**

| 阶段 | 时间 | 新增使用表 | 累计利用率 | 主要功能 |
|------|------|------------|------------|----------|
| 当前 | - | - | 28% (7/25) | 基础CRUD |
| Phase 1完成 | 3周 | user_profiles, gantt_data修复, task_templates | 40% (10/25) | 核心价值功能 |
| Phase 2完成 | 7周 | task_details, user_activities | 48% (12/25) | 功能丰富化 |
| Phase 3完成 | 11周 | task_dependencies, reminders, notification_settings | 60% (15/25) | 高级功能（简化版） |
| 后续规划 | 18周+ | 其余10个表 | 100% (25/25) | 完整功能生态 |

---

## 🔥 **Phase 1: 核心价值功能（2-3周）**

### **优先级1: 用户资料管理系统** ⭐⭐⭐⭐⭐
**涉及表**：`user_profiles`
**工时估算**：3-4天  |  **用户价值**：⭐⭐⭐⭐⭐  |  **技术难度**：⭐⭐

### **优先级2: 甘特图数据源修复** ⭐⭐⭐⭐
**涉及表**：`gantt_data`, `tasks`
**工时估算**：3-4天  |  **用户价值**：⭐⭐⭐⭐  |  **技术难度**：⭐⭐⭐

### **优先级3: 任务模板系统（简化版）** ⭐⭐⭐⭐⭐
**涉及表**：`task_templates`
**工时估算**：4-5天  |  **用户价值**：⭐⭐⭐⭐⭐  |  **技术难度**：⭐⭐⭐

---

## 🚀 **Phase 2: 功能丰富化（3-4周）**

### **优先级4: 任务详情扩展系统（分阶段实施）** ⭐⭐⭐⭐⭐
**涉及表**：`task_details`
**工时估算**：5-7天  |  **用户价值**：⭐⭐⭐⭐⭐  |  **技术难度**：⭐⭐⭐

### **优先级5: 用户活动追踪** ⭐⭐⭐
**涉及表**：`user_activities`
**工时估算**：3-4天  |  **用户价值**：⭐⭐⭐  |  **技术难度**：⭐⭐

---

## 📊 **Phase 3: 高级功能（4-6周）**

### **优先级6: 任务依赖关系（简化版）** ⭐⭐⭐
**涉及表**：`task_dependencies`
**工时估算**：4-5天  |  **用户价值**：⭐⭐⭐  |  **技术难度**：⭐⭐⭐

### **优先级7: 提醒系统（简化版）** ⭐⭐⭐
**涉及表**：`reminders`, `notification_settings`
**工时估算**：5-6天  |  **用户价值**：⭐⭐⭐  |  **技术难度**：⭐⭐⭐

---

## 📈 **成功指标定义（修订）**

### **Phase 1 成功指标（3周后）**
- 技术指标：数据库利用率达到40% (10/25表)，甘特图数据同步准确率 > 95%

### **Phase 2 成功指标（7周后）**
- 技术指标：数据库利用率达到48% (12/25表)，系统稳定性 > 99%

### **Phase 3 成功指标（11周后）**
- 技术指标：数据库利用率达到60% (15/25表)，代码覆盖率 > 80%

### **整体项目成功标准**
- 产品功能完整且用户体验优秀；系统性能稳定且安全可靠；技术架构支持未来扩展需求。

---

## 📝 **文档维护说明**
- **版本控制**：本文件将随数据库结构与功能范围调整而更新；涉及表数量的调整需同步到所有实施方案文档。


