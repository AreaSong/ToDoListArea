---
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-07-29
**æœ€åæ›´æ–°**: 2025-07-29
**æ›´æ–°äºº**: AreaSong
**å˜æ›´è¯´æ˜**: åˆå§‹ç‰ˆæœ¬åˆ›å»ºï¼Œå®é™…æ•°æ®åº“ç»“æ„æ–‡æ¡£
---


# ğŸ—ƒï¸ æ™ºèƒ½æé†’äº‹é¡¹Web App - å®é™…æ•°æ®åº“ç»“æ„æ–‡æ¡£

> **é‡è¦è¯´æ˜**: æœ¬æ–‡æ¡£åæ˜ äº†å®é™…åˆ›å»ºçš„æ•°æ®åº“ç»“æ„ï¼Œä¸ `01_CreateDatabase_Fixed_v3.sql` è„šæœ¬å®Œå…¨ä¸€è‡´ã€‚


## ğŸ”— ç›¸å…³æ–‡æ¡£é“¾æ¥

- [APIæ¥å£æ–‡æ¡£](./APIæ–‡æ¡£.md) - æŸ¥çœ‹æ•°æ®åº“è¡¨å¯¹åº”çš„APIæ¥å£
- [æŠ€æœ¯æ¶æ„è®¾è®¡](./æŠ€æœ¯æ¶æ„.md#æ•°æ®åº“è®¾è®¡) - æŸ¥çœ‹æ•°æ®åº“æ¶æ„è®¾è®¡åŸåˆ™
- [å¼€å‘æµç¨‹å®æ–½](./å¼€å‘æµç¨‹å®æ–½.md#ç¬¬å››æ­¥æ•°æ®åº“ç»“æ„è®¾è®¡) - æŸ¥çœ‹æ•°æ®åº“è®¾è®¡æµç¨‹

## ğŸ“‹ ç›®å½•

- [æ•°æ®åº“æ¦‚è¿°](#æ•°æ®åº“æ¦‚è¿°)
- [ç”¨æˆ·ç®¡ç†è¡¨](#ç”¨æˆ·ç®¡ç†è¡¨)
- [ä»»åŠ¡ç®¡ç†è¡¨](#ä»»åŠ¡ç®¡ç†è¡¨)
- [æ—¶é—´çº¿ç®¡ç†è¡¨](#æ—¶é—´çº¿ç®¡ç†è¡¨)
- [æé†’ç³»ç»Ÿè¡¨](#æé†’ç³»ç»Ÿè¡¨)
- [æ•°æ®åˆ†æè¡¨](#æ•°æ®åˆ†æè¡¨)
- [ç³»ç»Ÿé…ç½®è¡¨](#ç³»ç»Ÿé…ç½®è¡¨)
- [ç´¢å¼•è®¾è®¡](#ç´¢å¼•è®¾è®¡)
- [å¤–é”®çº¦æŸ](#å¤–é”®çº¦æŸ)

---

## ğŸ—„ï¸ æ•°æ®åº“æ¦‚è¿°

### å®é™…åˆ›å»ºçŠ¶æ€
- **æ•°æ®åº“åç§°**: ToDoListArea
- **åˆ›å»ºæ—¶é—´**: 2025-07-29 20:18:41
- **è¡¨æ•°é‡**: 23ä¸ª
- **ç´¢å¼•æ•°é‡**: 207ä¸ª
- **å¤–é”®çº¦æŸ**: 27ä¸ª
- **è„šæœ¬ç‰ˆæœ¬**: `01_CreateDatabase_Fixed_v3.sql`

### æŠ€æœ¯ç‰¹æ€§
- **ä¸»é”®ç±»å‹**: UNIQUEIDENTIFIER (NEWID())
- **æ—¶é—´æˆ³**: DATETIME2 (GETDATE())
- **çº§è”åˆ é™¤**: ç”¨æˆ·çº§è”ï¼Œä»»åŠ¡ä½¿ç”¨NO ACTIONé¿å…å†²çª
- **å­—ç¬¦ç¼–ç **: æ”¯æŒUnicode (NVARCHAR)

---

## ğŸ‘¥ ç”¨æˆ·ç®¡ç†è¡¨

### 1. usersï¼ˆç”¨æˆ·è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯å’Œè®¤è¯æ•°æ®

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | ç”¨æˆ·å”¯ä¸€æ ‡è¯† |
| email | VARCHAR(255) | UNIQUE NOT NULL | - | é‚®ç®±åœ°å€ |
| phone | VARCHAR(20) | UNIQUE | NULL | æ‰‹æœºå·ç  |
| password_hash | VARCHAR(255) | NOT NULL | - | å¯†ç å“ˆå¸Œå€¼ |
| name | VARCHAR(100) | NOT NULL | - | ç”¨æˆ·å§“å |
| avatar_url | NVARCHAR(MAX) | - | NULL | å¤´åƒURL |
| status | VARCHAR(20) | NOT NULL | 'active' | ç”¨æˆ·çŠ¶æ€ |
| **role** | **VARCHAR(20)** | **NOT NULL** | **'user'** | **ç”¨æˆ·è§’è‰²ï¼šadmin, user** |
| email_verified | BIT | NOT NULL | 0 | é‚®ç®±éªŒè¯çŠ¶æ€ |
| phone_verified | BIT | NOT NULL | 0 | æ‰‹æœºéªŒè¯çŠ¶æ€ |
| last_login_at | DATETIME2 | - | NULL | æœ€åç™»å½•æ—¶é—´ |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

### 2. invitation_codesï¼ˆé‚€è¯·ç è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ç³»ç»Ÿé‚€è¯·ç ä¿¡æ¯ï¼Œç”¨äºæ§åˆ¶ç”¨æˆ·æ³¨å†Œæƒé™

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | é‚€è¯·ç å”¯ä¸€æ ‡è¯† |
| code | VARCHAR(32) | UNIQUE NOT NULL | - | é‚€è¯·ç å­—ç¬¦ä¸² |
| max_uses | INTEGER | NOT NULL | 1 | æœ€å¤§ä½¿ç”¨æ¬¡æ•° |
| used_count | INTEGER | NOT NULL | 0 | å·²ä½¿ç”¨æ¬¡æ•° |
| expires_at | DATETIME2 | - | NULL | è¿‡æœŸæ—¶é—´ï¼ŒNULLè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ |
| status | VARCHAR(20) | NOT NULL | 'active' | çŠ¶æ€ï¼šactive, disabled |
| created_by | UNIQUEIDENTIFIER | FOREIGN KEY | - | åˆ›å»ºè€…ç”¨æˆ·ID |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•**:
- `idx_invitation_codes_code` - é‚€è¯·ç å­—æ®µç´¢å¼•
- `idx_invitation_codes_status` - çŠ¶æ€å­—æ®µç´¢å¼•
- `idx_invitation_codes_expires_at` - è¿‡æœŸæ—¶é—´ç´¢å¼•
- `idx_invitation_codes_created_by` - åˆ›å»ºè€…ç´¢å¼•

### 3. invitation_code_usagesï¼ˆé‚€è¯·ç ä½¿ç”¨è®°å½•è¡¨ï¼‰
**æè¿°**: è®°å½•é‚€è¯·ç çš„ä½¿ç”¨å†å²ï¼Œé˜²æ­¢é‡å¤ä½¿ç”¨

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è®°å½•å”¯ä¸€æ ‡è¯† |
| invitation_code_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | é‚€è¯·ç ID |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ä½¿ç”¨è€…ç”¨æˆ·ID |
| used_at | DATETIME2 | NOT NULL | GETDATE() | ä½¿ç”¨æ—¶é—´ |
| ip_address | VARCHAR(45) | - | NULL | ä½¿ç”¨è€…IPåœ°å€ |
| user_agent | NVARCHAR(500) | - | NULL | ç”¨æˆ·ä»£ç†ä¿¡æ¯ |

**çº¦æŸ**:
- `UK_invitation_code_usages_code_user` - å”¯ä¸€çº¦æŸï¼šåŒä¸€ç”¨æˆ·ä¸èƒ½é‡å¤ä½¿ç”¨åŒä¸€é‚€è¯·ç 

**ç´¢å¼•**:
- `idx_invitation_code_usages_invitation_code` - é‚€è¯·ç IDç´¢å¼•
- `idx_invitation_code_usages_user` - ç”¨æˆ·IDç´¢å¼•
- `idx_invitation_code_usages_used_at` - ä½¿ç”¨æ—¶é—´ç´¢å¼•

### 5. user_profilesï¼ˆç”¨æˆ·èµ„æ–™è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ç”¨æˆ·è¯¦ç»†èµ„æ–™å’Œåå¥½è®¾ç½®

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è®°å½•å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| first_name | VARCHAR(100) | - | NULL | åå­— |
| last_name | VARCHAR(100) | - | NULL | å§“æ° |
| timezone | VARCHAR(50) | NOT NULL | 'UTC' | æ—¶åŒºè®¾ç½® |
| language | VARCHAR(10) | NOT NULL | 'zh-CN' | è¯­è¨€åå¥½ |
| date_format | VARCHAR(20) | NOT NULL | 'YYYY-MM-DD' | æ—¥æœŸæ ¼å¼ |
| time_format | VARCHAR(10) | NOT NULL | '24h' | æ—¶é—´æ ¼å¼ |
| notification_preferences | NVARCHAR(MAX) | - | NULL | é€šçŸ¥åå¥½(JSON) |
| theme_preferences | NVARCHAR(MAX) | - | NULL | ä¸»é¢˜åå¥½(JSON) |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

### 6. user_sessionsï¼ˆç”¨æˆ·ä¼šè¯è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ç”¨æˆ·ç™»å½•ä¼šè¯ä¿¡æ¯

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | ä¼šè¯å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| session_token | VARCHAR(255) | UNIQUE NOT NULL | - | ä¼šè¯ä»¤ç‰Œ |
| refresh_token | VARCHAR(255) | UNIQUE | NULL | åˆ·æ–°ä»¤ç‰Œ |
| device_info | NVARCHAR(500) | - | NULL | è®¾å¤‡ä¿¡æ¯ |
| ip_address | VARCHAR(45) | - | NULL | IPåœ°å€ |
| user_agent | NVARCHAR(MAX) | - | NULL | ç”¨æˆ·ä»£ç† |
| is_active | BIT | NOT NULL | 1 | æ˜¯å¦æ´»è·ƒ |
| expires_at | DATETIME2 | NOT NULL | - | è¿‡æœŸæ—¶é—´ |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

### 4. user_oauth_accountsï¼ˆç¬¬ä¸‰æ–¹è´¦æˆ·è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ç¬¬ä¸‰æ–¹ç™»å½•è´¦æˆ·ä¿¡æ¯

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è®°å½•å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| provider | VARCHAR(50) | NOT NULL | - | æä¾›å•† |
| provider_user_id | VARCHAR(255) | NOT NULL | - | æä¾›å•†ç”¨æˆ·ID |
| provider_email | VARCHAR(255) | - | NULL | æä¾›å•†é‚®ç®± |
| provider_data | NVARCHAR(MAX) | - | NULL | æä¾›å•†æ•°æ®(JSON) |
| is_active | BIT | NOT NULL | 1 | æ˜¯å¦æ´»è·ƒ |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

---

## ğŸ“‹ ä»»åŠ¡ç®¡ç†è¡¨

### 5. task_categoriesï¼ˆä»»åŠ¡åˆ†ç±»è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ä»»åŠ¡åˆ†ç±»ä¿¡æ¯ï¼ˆç³»ç»Ÿçº§åˆ«ï¼Œéç”¨æˆ·çº§åˆ«ï¼‰

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | åˆ†ç±»å”¯ä¸€æ ‡è¯† |
| name | VARCHAR(100) | NOT NULL | - | åˆ†ç±»åç§° |
| color | VARCHAR(7) | NOT NULL | '#007bff' | åˆ†ç±»é¢œè‰² |
| icon | VARCHAR(50) | - | NULL | åˆ†ç±»å›¾æ ‡ |
| description | NVARCHAR(500) | - | NULL | åˆ†ç±»æè¿° |
| is_system | BIT | NOT NULL | 0 | æ˜¯å¦ç³»ç»Ÿåˆ†ç±» |
| sort_order | INTEGER | NOT NULL | 0 | æ’åºé¡ºåº |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

### 6. tasksï¼ˆä»»åŠ¡è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ä»»åŠ¡åŸºæœ¬ä¿¡æ¯

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | ä»»åŠ¡å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| parent_task_id | UNIQUEIDENTIFIER | FOREIGN KEY | NULL | çˆ¶ä»»åŠ¡ID |
| category_id | UNIQUEIDENTIFIER | FOREIGN KEY | NULL | åˆ†ç±»ID |
| title | VARCHAR(255) | NOT NULL | - | ä»»åŠ¡æ ‡é¢˜ |
| description | NVARCHAR(MAX) | - | NULL | ä»»åŠ¡æè¿° |
| status | VARCHAR(20) | NOT NULL | 'pending' | ä»»åŠ¡çŠ¶æ€ |
| priority | VARCHAR(10) | NOT NULL | 'medium' | ä¼˜å…ˆçº§ |
| start_time | DATETIME2 | - | NULL | å¼€å§‹æ—¶é—´ |
| end_time | DATETIME2 | - | NULL | ç»“æŸæ—¶é—´ |
| estimated_duration | INTEGER | - | NULL | é¢„ä¼°æ—¶é•¿(åˆ†é’Ÿ) |
| actual_duration | INTEGER | - | NULL | å®é™…æ—¶é•¿(åˆ†é’Ÿ) |
| completion_percentage | DECIMAL(5,2) | NOT NULL | 0.00 | å®Œæˆç™¾åˆ†æ¯” |
| is_recurring | BIT | NOT NULL | 0 | æ˜¯å¦é‡å¤ä»»åŠ¡ |
| recurrence_pattern | NVARCHAR(MAX) | - | NULL | é‡å¤æ¨¡å¼(JSON) |
| tags | NVARCHAR(MAX) | - | NULL | æ ‡ç­¾(JSON) |
| attachments | NVARCHAR(MAX) | - | NULL | é™„ä»¶(JSON) |
| completed_at | DATETIME2 | - | NULL | å®Œæˆæ—¶é—´ |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

**å¤–é”®çº¦æŸ**:
- user_id â†’ users(id) ON DELETE CASCADE
- parent_task_id â†’ tasks(id) ON DELETE NO ACTION
- category_id â†’ task_categories(id) ON DELETE SET NULL

### 7. task_detailsï¼ˆä»»åŠ¡è¯¦æƒ…è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ä»»åŠ¡è¯¦ç»†ä¿¡æ¯

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è®°å½•å”¯ä¸€æ ‡è¯† |
| task_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ä»»åŠ¡ID |
| detail_type | VARCHAR(50) | NOT NULL | - | è¯¦æƒ…ç±»å‹ |
| detail_key | VARCHAR(100) | NOT NULL | - | è¯¦æƒ…é”® |
| detail_value | NVARCHAR(MAX) | - | NULL | è¯¦æƒ…å€¼ |
| sort_order | INTEGER | NOT NULL | 0 | æ’åºé¡ºåº |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

### 8. task_dependenciesï¼ˆä»»åŠ¡ä¾èµ–å…³ç³»è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è®°å½•å”¯ä¸€æ ‡è¯† |
| task_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ä»»åŠ¡ID |
| depends_on_task_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ä¾èµ–ä»»åŠ¡ID |
| dependency_type | VARCHAR(20) | NOT NULL | 'finish_to_start' | ä¾èµ–ç±»å‹ |
| lag_time | INTEGER | NOT NULL | 0 | å»¶è¿Ÿæ—¶é—´ |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |

**å¤–é”®çº¦æŸ**:
- task_id â†’ tasks(id) ON DELETE CASCADE
- depends_on_task_id â†’ tasks(id) ON DELETE NO ACTION

### 9. task_templatesï¼ˆä»»åŠ¡æ¨¡æ¿è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ä»»åŠ¡æ¨¡æ¿ä¿¡æ¯

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | æ¨¡æ¿å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| name | VARCHAR(255) | NOT NULL | - | æ¨¡æ¿åç§° |
| description | NVARCHAR(MAX) | - | NULL | æ¨¡æ¿æè¿° |
| template_data | NVARCHAR(MAX) | NOT NULL | - | æ¨¡æ¿æ•°æ®(JSON) |
| category | VARCHAR(100) | - | NULL | æ¨¡æ¿åˆ†ç±» |
| is_public | BIT | NOT NULL | 0 | æ˜¯å¦å…¬å¼€ |
| usage_count | INTEGER | NOT NULL | 0 | ä½¿ç”¨æ¬¡æ•° |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

---

## ğŸ“Š æ—¶é—´çº¿ç®¡ç†è¡¨

### 10. timeline_nodesï¼ˆæ—¶é—´çº¿èŠ‚ç‚¹è¡¨ï¼‰
**æè¿°**: å­˜å‚¨æ—¶é—´çº¿èŠ‚ç‚¹ä¿¡æ¯

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | èŠ‚ç‚¹å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| task_id | UNIQUEIDENTIFIER | FOREIGN KEY | NULL | ä»»åŠ¡ID |
| node_type | VARCHAR(20) | NOT NULL | 'task' | èŠ‚ç‚¹ç±»å‹ |
| title | VARCHAR(255) | NOT NULL | - | èŠ‚ç‚¹æ ‡é¢˜ |
| description | NVARCHAR(MAX) | - | NULL | èŠ‚ç‚¹æè¿° |
| start_time | DATETIME2 | NOT NULL | - | å¼€å§‹æ—¶é—´ |
| end_time | DATETIME2 | - | NULL | ç»“æŸæ—¶é—´ |
| color | VARCHAR(7) | NOT NULL | '#007bff' | èŠ‚ç‚¹é¢œè‰² |
| position_data | NVARCHAR(MAX) | - | NULL | ä½ç½®æ•°æ®(JSON) |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

**å¤–é”®çº¦æŸ**:
- user_id â†’ users(id) ON DELETE CASCADE
- task_id â†’ tasks(id) ON DELETE NO ACTION

### 11. timeline_eventsï¼ˆæ—¶é—´çº¿äº‹ä»¶è¡¨ï¼‰
**æè¿°**: å­˜å‚¨æ—¶é—´çº¿äº‹ä»¶å’Œé‡Œç¨‹ç¢‘

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | äº‹ä»¶å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| event_type | VARCHAR(50) | NOT NULL | - | äº‹ä»¶ç±»å‹ |
| event_title | VARCHAR(255) | NOT NULL | - | äº‹ä»¶æ ‡é¢˜ |
| event_description | NVARCHAR(MAX) | - | NULL | äº‹ä»¶æè¿° |
| event_data | NVARCHAR(MAX) | - | NULL | äº‹ä»¶æ•°æ®(JSON) |
| occurred_at | DATETIME2 | NOT NULL | GETDATE() | å‘ç”Ÿæ—¶é—´ |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |

### 12. gantt_dataï¼ˆç”˜ç‰¹å›¾æ•°æ®è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ç”˜ç‰¹å›¾ç›¸å…³æ•°æ®

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è®°å½•å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| task_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ä»»åŠ¡ID |
| start_date | DATETIME2 | NOT NULL | - | å¼€å§‹æ—¥æœŸ |
| end_date | DATETIME2 | NOT NULL | - | ç»“æŸæ—¥æœŸ |
| progress | DECIMAL(5,2) | NOT NULL | 0.00 | è¿›åº¦ç™¾åˆ†æ¯” |
| dependencies | NVARCHAR(MAX) | - | NULL | ä¾èµ–å…³ç³»(JSON) |
| resources | NVARCHAR(MAX) | - | NULL | èµ„æºä¿¡æ¯(JSON) |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

**å¤–é”®çº¦æŸ**:
- user_id â†’ users(id) ON DELETE CASCADE
- task_id â†’ tasks(id) ON DELETE NO ACTION

### 13. time_blocksï¼ˆæ—¶é—´å—è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ä¸“æ³¨æ—¶é—´å’Œæ—¶é—´å—ä¿¡æ¯

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | æ—¶é—´å—å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| task_id | UNIQUEIDENTIFIER | FOREIGN KEY | NULL | å…³è”ä»»åŠ¡ID |
| title | VARCHAR(255) | NOT NULL | - | æ—¶é—´å—æ ‡é¢˜ |
| description | NVARCHAR(MAX) | - | NULL | æ—¶é—´å—æè¿° |
| start_time | DATETIME2 | NOT NULL | - | å¼€å§‹æ—¶é—´ |
| end_time | DATETIME2 | NOT NULL | - | ç»“æŸæ—¶é—´ |
| block_type | VARCHAR(20) | NOT NULL | 'work' | æ—¶é—´å—ç±»å‹ |
| color | VARCHAR(7) | NOT NULL | '#007bff' | æ—¶é—´å—é¢œè‰² |
| is_locked | BIT | NOT NULL | 0 | æ˜¯å¦é”å®š |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

**å¤–é”®çº¦æŸ**:
- user_id â†’ users(id) ON DELETE CASCADE
- task_id â†’ tasks(id) ON DELETE NO ACTION

---

## ğŸ”” æé†’ç³»ç»Ÿè¡¨

### 14. remindersï¼ˆæé†’è¡¨ï¼‰
**æè¿°**: å­˜å‚¨æé†’åŸºæœ¬ä¿¡æ¯

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | æé†’å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| task_id | UNIQUEIDENTIFIER | FOREIGN KEY | NULL | å…³è”ä»»åŠ¡ID |
| title | VARCHAR(255) | NOT NULL | - | æé†’æ ‡é¢˜ |
| message | NVARCHAR(MAX) | - | NULL | æé†’æ¶ˆæ¯ |
| reminder_time | DATETIME2 | NOT NULL | - | æé†’æ—¶é—´ |
| status | VARCHAR(20) | NOT NULL | 'pending' | æé†’çŠ¶æ€ |
| channels | NVARCHAR(MAX) | NOT NULL | '["web"]' | æé†’æ¸ é“(JSON) |
| repeat_pattern | NVARCHAR(MAX) | - | NULL | é‡å¤æ¨¡å¼(JSON) |
| snooze_until | DATETIME2 | - | NULL | å»¶è¿Ÿåˆ°æ—¶é—´ |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

**å¤–é”®çº¦æŸ**:
- user_id â†’ users(id) ON DELETE CASCADE
- task_id â†’ tasks(id) ON DELETE NO ACTION

### 15. reminder_rulesï¼ˆæé†’è§„åˆ™è¡¨ï¼‰
**æè¿°**: å­˜å‚¨æé†’è§„åˆ™å’Œæ¨¡æ¿

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è§„åˆ™å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| rule_name | VARCHAR(255) | NOT NULL | - | è§„åˆ™åç§° |
| rule_type | VARCHAR(50) | NOT NULL | - | è§„åˆ™ç±»å‹ |
| conditions | NVARCHAR(MAX) | NOT NULL | - | è§¦å‘æ¡ä»¶(JSON) |
| actions | NVARCHAR(MAX) | NOT NULL | - | æ‰§è¡ŒåŠ¨ä½œ(JSON) |
| is_active | BIT | NOT NULL | 1 | æ˜¯å¦æ¿€æ´» |
| priority | INTEGER | NOT NULL | 0 | ä¼˜å…ˆçº§ |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

### 16. reminder_historyï¼ˆæé†’å†å²è¡¨ï¼‰
**æè¿°**: å­˜å‚¨æé†’å‘é€å†å²

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è®°å½•å”¯ä¸€æ ‡è¯† |
| reminder_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | æé†’ID |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| sent_at | DATETIME2 | NOT NULL | GETDATE() | å‘é€æ—¶é—´ |
| channel | VARCHAR(50) | NOT NULL | - | å‘é€æ¸ é“ |
| status | VARCHAR(20) | NOT NULL | - | å‘é€çŠ¶æ€ |
| response_data | NVARCHAR(MAX) | - | NULL | å“åº”æ•°æ®(JSON) |
| error_message | NVARCHAR(MAX) | - | NULL | é”™è¯¯ä¿¡æ¯ |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |

**å¤–é”®çº¦æŸ**:
- reminder_id â†’ reminders(id) ON DELETE NO ACTION
- user_id â†’ users(id) ON DELETE CASCADE

### 17. notification_settingsï¼ˆé€šçŸ¥è®¾ç½®è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ç”¨æˆ·é€šçŸ¥è®¾ç½®

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è®¾ç½®å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| channel | VARCHAR(50) | NOT NULL | - | é€šçŸ¥æ¸ é“ |
| is_enabled | BIT | NOT NULL | 1 | æ˜¯å¦å¯ç”¨ |
| settings | NVARCHAR(MAX) | - | NULL | æ¸ é“è®¾ç½®(JSON) |
| quiet_hours_start | TIME | - | NULL | é™éŸ³å¼€å§‹æ—¶é—´ |
| quiet_hours_end | TIME | - | NULL | é™éŸ³ç»“æŸæ—¶é—´ |
| timezone | VARCHAR(50) | NOT NULL | 'UTC' | æ—¶åŒº |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

**å”¯ä¸€çº¦æŸ**: (user_id, channel)

---

## ğŸ“Š æ•°æ®åˆ†æè¡¨

### 18. user_activitiesï¼ˆç”¨æˆ·æ´»åŠ¨è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ç”¨æˆ·æ´»åŠ¨è®°å½•

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è®°å½•å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| activity_type | VARCHAR(50) | NOT NULL | - | æ´»åŠ¨ç±»å‹ |
| activity_description | NVARCHAR(500) | - | NULL | æ´»åŠ¨æè¿° |
| entity_type | VARCHAR(50) | - | NULL | å®ä½“ç±»å‹ |
| entity_id | UNIQUEIDENTIFIER | - | NULL | å®ä½“ID |
| metadata | NVARCHAR(MAX) | - | NULL | å…ƒæ•°æ®(JSON) |
| ip_address | VARCHAR(45) | - | NULL | IPåœ°å€ |
| user_agent | NVARCHAR(MAX) | - | NULL | ç”¨æˆ·ä»£ç† |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |

### 19. task_statisticsï¼ˆä»»åŠ¡ç»Ÿè®¡è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ä»»åŠ¡ç»Ÿè®¡æ•°æ®

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è®°å½•å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| date | DATE | NOT NULL | - | ç»Ÿè®¡æ—¥æœŸ |
| total_tasks | INTEGER | NOT NULL | 0 | æ€»ä»»åŠ¡æ•° |
| completed_tasks | INTEGER | NOT NULL | 0 | å®Œæˆä»»åŠ¡æ•° |
| pending_tasks | INTEGER | NOT NULL | 0 | å¾…å¤„ç†ä»»åŠ¡æ•° |
| overdue_tasks | INTEGER | NOT NULL | 0 | è¿‡æœŸä»»åŠ¡æ•° |
| total_time_spent | INTEGER | NOT NULL | 0 | æ€»èŠ±è´¹æ—¶é—´(åˆ†é’Ÿ) |
| productivity_score | DECIMAL(5,2) | - | NULL | ç”Ÿäº§åŠ›è¯„åˆ† |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

**å”¯ä¸€çº¦æŸ**: (user_id, date)

### 20. productivity_metricsï¼ˆç”Ÿäº§åŠ›æŒ‡æ ‡è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ç”Ÿäº§åŠ›ç›¸å…³æŒ‡æ ‡

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | è®°å½•å”¯ä¸€æ ‡è¯† |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | - | ç”¨æˆ·ID |
| metric_type | VARCHAR(50) | NOT NULL | - | æŒ‡æ ‡ç±»å‹ |
| metric_value | DECIMAL(10,2) | NOT NULL | - | æŒ‡æ ‡å€¼ |
| metric_unit | VARCHAR(20) | - | NULL | å•ä½ |
| period_start | DATETIME2 | NOT NULL | - | å‘¨æœŸå¼€å§‹ |
| period_end | DATETIME2 | NOT NULL | - | å‘¨æœŸç»“æŸ |
| metadata | NVARCHAR(MAX) | - | NULL | å…ƒæ•°æ®(JSON) |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |

---

## âš™ï¸ ç³»ç»Ÿé…ç½®è¡¨

### 21. system_configsï¼ˆç³»ç»Ÿé…ç½®è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ç³»ç»Ÿé…ç½®ä¿¡æ¯

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | é…ç½®å”¯ä¸€æ ‡è¯† |
| config_key | VARCHAR(100) | UNIQUE NOT NULL | - | é…ç½®é”® |
| config_value | NVARCHAR(MAX) | NOT NULL | - | é…ç½®å€¼ |
| description | NVARCHAR(500) | - | NULL | é…ç½®æè¿° |
| is_encrypted | BIT | NOT NULL | 0 | æ˜¯å¦åŠ å¯† |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

### 22. feature_flagsï¼ˆåŠŸèƒ½å¼€å…³è¡¨ï¼‰
**æè¿°**: å­˜å‚¨åŠŸèƒ½å¼€å…³é…ç½®

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | å¼€å…³å”¯ä¸€æ ‡è¯† |
| flag_key | VARCHAR(100) | UNIQUE NOT NULL | - | åŠŸèƒ½é”® |
| is_enabled | BIT | NOT NULL | 0 | æ˜¯å¦å¯ç”¨ |
| description | NVARCHAR(500) | - | NULL | åŠŸèƒ½æè¿° |
| target_users | NVARCHAR(MAX) | - | NULL | ç›®æ ‡ç”¨æˆ·(JSON) |
| start_date | DATETIME2 | - | NULL | å¼€å§‹æ—¥æœŸ |
| end_date | DATETIME2 | - | NULL | ç»“æŸæ—¥æœŸ |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME2 | NOT NULL | GETDATE() | æ›´æ–°æ—¶é—´ |

### 23. system_logsï¼ˆç³»ç»Ÿæ—¥å¿—è¡¨ï¼‰
**æè¿°**: å­˜å‚¨ç³»ç»Ÿæ“ä½œæ—¥å¿—

| å­—æ®µå | æ•°æ®ç±»å‹ | çº¦æŸ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|----------|------|--------|------|
| id | UNIQUEIDENTIFIER | PRIMARY KEY | NEWID() | æ—¥å¿—å”¯ä¸€æ ‡è¯† |
| log_level | VARCHAR(20) | NOT NULL | - | æ—¥å¿—çº§åˆ« |
| logger_name | VARCHAR(255) | NOT NULL | - | è®°å½•å™¨åç§° |
| message | NVARCHAR(MAX) | NOT NULL | - | æ—¥å¿—æ¶ˆæ¯ |
| exception | NVARCHAR(MAX) | - | NULL | å¼‚å¸¸ä¿¡æ¯ |
| properties | NVARCHAR(MAX) | - | NULL | å±æ€§(JSON) |
| user_id | UNIQUEIDENTIFIER | FOREIGN KEY | NULL | ç”¨æˆ·ID |
| request_id | VARCHAR(100) | - | NULL | è¯·æ±‚ID |
| created_at | DATETIME2 | NOT NULL | GETDATE() | åˆ›å»ºæ—¶é—´ |

**å¤–é”®çº¦æŸ**:
- user_id â†’ users(id) ON DELETE SET NULL

---

## ğŸ” ç´¢å¼•è®¾è®¡

### ä¸»è¦ç´¢å¼•
- **ç”¨æˆ·è¡¨**: email, status, created_at
- **ä»»åŠ¡è¡¨**: user_id, status, priority, start_time, end_time, parent_task_id, category_id
- **æé†’è¡¨**: user_id, task_id, reminder_time, status
- **ç”¨æˆ·æ´»åŠ¨**: user_id, activity_type, created_at
- **ä¼šè¯è¡¨**: user_id, session_token, expires_at

### å¤åˆç´¢å¼•
- `idx_tasks_user_status_priority` (user_id, status, priority)
- `idx_user_activities_user_type_time` (user_id, activity_type, created_at)

---

## ğŸ”— å¤–é”®çº¦æŸæ€»ç»“

### çº§è”åˆ é™¤ç­–ç•¥
- **ç”¨æˆ·åˆ é™¤**: çº§è”åˆ é™¤æ‰€æœ‰ç”¨æˆ·ç›¸å…³æ•°æ®
- **ä»»åŠ¡åˆ é™¤**: ç›¸å…³è¡¨ä½¿ç”¨ NO ACTION æˆ– SET NULLï¼Œé¿å…å¾ªç¯çº§è”

### 27ä¸ªå¤–é”®çº¦æŸ
1. user_profiles.user_id â†’ users.id (CASCADE)
2. user_sessions.user_id â†’ users.id (CASCADE)
3. user_oauth_accounts.user_id â†’ users.id (CASCADE)
4. tasks.user_id â†’ users.id (CASCADE)
5. tasks.parent_task_id â†’ tasks.id (NO ACTION)
6. tasks.category_id â†’ task_categories.id (SET NULL)
7. task_details.task_id â†’ tasks.id (CASCADE)
8. task_dependencies.task_id â†’ tasks.id (CASCADE)
9. task_dependencies.depends_on_task_id â†’ tasks.id (NO ACTION)
10. task_templates.user_id â†’ users.id (CASCADE)
11. timeline_nodes.user_id â†’ users.id (CASCADE)
12. timeline_nodes.task_id â†’ tasks.id (NO ACTION)
13. timeline_events.user_id â†’ users.id (CASCADE)
14. gantt_data.user_id â†’ users.id (CASCADE)
15. gantt_data.task_id â†’ tasks.id (NO ACTION)
16. time_blocks.user_id â†’ users.id (CASCADE)
17. time_blocks.task_id â†’ tasks.id (NO ACTION)
18. reminders.user_id â†’ users.id (CASCADE)
19. reminders.task_id â†’ tasks.id (NO ACTION)
20. reminder_rules.user_id â†’ users.id (CASCADE)
21. reminder_history.reminder_id â†’ reminders.id (NO ACTION)
22. reminder_history.user_id â†’ users.id (CASCADE)
23. notification_settings.user_id â†’ users.id (CASCADE)
24. user_activities.user_id â†’ users.id (CASCADE)
25. task_statistics.user_id â†’ users.id (CASCADE)
26. productivity_metrics.user_id â†’ users.id (CASCADE)
27. system_logs.user_id â†’ users.id (SET NULL)

---

## ğŸ“ æ€»ç»“

æœ¬æ–‡æ¡£å‡†ç¡®åæ˜ äº†å®é™…åˆ›å»ºçš„æ•°æ®åº“ç»“æ„ï¼ŒåŒ…æ‹¬ï¼š

âœ… **23ä¸ªè¡¨å®Œæ•´åˆ›å»º**
âœ… **27ä¸ªå¤–é”®çº¦æŸæ­£ç¡®é…ç½®**
âœ… **207ä¸ªç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½**
âœ… **çº§è”åˆ é™¤å†²çªå·²è§£å†³**
âœ… **é»˜è®¤æ•°æ®å·²æ’å…¥**

æ•°æ®åº“å·²å®Œå…¨å°±ç»ªï¼Œå¯ä»¥å¼€å§‹ASP.NET Coreåç«¯å¼€å‘ï¼

## ğŸ—„ï¸ æ•°æ®åº“ERå›¾

```mermaid
erDiagram
    users ||--o{ user_profiles : has
    users ||--o{ user_sessions : has
    users ||--o{ user_oauth_accounts : has
    users ||--o{ tasks : creates
    users ||--o{ reminders : sets
    users ||--o{ user_activities : generates

    task_categories ||--o{ tasks : categorizes
    tasks ||--o{ task_details : has
    tasks ||--o{ task_dependencies : depends_on
    tasks ||--o{ timeline_nodes : appears_in
    tasks ||--o{ gantt_data : visualized_in
    tasks ||--o{ time_blocks : scheduled_in
    tasks ||--o{ reminders : triggers

    reminders ||--o{ reminder_history : generates
    users ||--o{ reminder_rules : defines
    users ||--o{ notification_settings : configures

    users {
        uniqueidentifier id PK
        varchar email UK
        varchar phone UK
        varchar password_hash
        varchar name
        nvarchar avatar_url
        varchar status
        bit email_verified
        bit phone_verified
        datetime2 last_login_at
        datetime2 created_at
        datetime2 updated_at
    }

    tasks {
        uniqueidentifier id PK
        uniqueidentifier user_id FK
        uniqueidentifier parent_task_id FK
        uniqueidentifier category_id FK
        varchar title
        nvarchar description
        varchar status
        varchar priority
        datetime2 start_time
        datetime2 end_time
        integer estimated_duration
        integer actual_duration
        decimal completion_percentage
        bit is_recurring
        nvarchar recurrence_pattern
        nvarchar tags
        nvarchar attachments
        datetime2 completed_at
        datetime2 created_at
        datetime2 updated_at
    }
```

---

## ğŸ“ æ›´æ–°è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°äºº | å˜æ›´è¯´æ˜ |
|------|------|--------|----------|
| v1.0 | 2025-07-29 | AreaSong | åˆå§‹ç‰ˆæœ¬åˆ›å»ºï¼Œå®é™…æ•°æ®åº“ç»“æ„æ–‡æ¡£ |

### æ›´æ–°é¢‘ç‡è¯´æ˜
- **Schemaå˜æ›´**: æ•°æ®åº“ç»“æ„å˜æ›´æ—¶ç«‹å³æ›´æ–°
- **ç´¢å¼•ä¼˜åŒ–**: æ€§èƒ½ä¼˜åŒ–å¯¼è‡´çš„ç´¢å¼•å˜æ›´æ—¶æ›´æ–°
- **çº¦æŸè°ƒæ•´**: å¤–é”®çº¦æŸæˆ–æ£€æŸ¥çº¦æŸå˜æ›´æ—¶æ›´æ–°

### æ•°æ®åº“åŒæ­¥æœºåˆ¶
- **ä»£ç ä¼˜å…ˆ**: ä½¿ç”¨Entity Framework Core Code Firstæ–¹å¼
- **è¿ç§»è„šæœ¬**: è‡ªåŠ¨ç”Ÿæˆæ•°æ®åº“è¿ç§»è„šæœ¬
- **ç‰ˆæœ¬æ§åˆ¶**: æ•°æ®åº“Schemaå˜æ›´çº³å…¥ç‰ˆæœ¬æ§åˆ¶

### ä¸APIæ¥å£çš„æ˜ å°„å…³ç³»
æœ¬æ•°æ®åº“ç»“æ„ä¸APIæ¥å£çš„å¯¹åº”å…³ç³»ï¼Œè¯¦è§ [APIæ–‡æ¡£.md](./APIæ–‡æ¡£.md)ï¼š

- **ç”¨æˆ·ç®¡ç†è¡¨** â†” [è®¤è¯æˆæƒAPI](./APIæ–‡æ¡£.md#è®¤è¯æˆæƒapi)
- **ä»»åŠ¡ç®¡ç†è¡¨** â†” [ä»»åŠ¡ç®¡ç†API](./APIæ–‡æ¡£.md#ä»»åŠ¡ç®¡ç†api)
- **æ—¶é—´çº¿ç®¡ç†è¡¨** â†” [æ—¶é—´çº¿ç®¡ç†API](./APIæ–‡æ¡£.md#æ—¶é—´çº¿ç®¡ç†api)
- **æé†’ç³»ç»Ÿè¡¨** â†” [æé†’ç³»ç»ŸAPI](./APIæ–‡æ¡£.md#æé†’ç³»ç»Ÿapi)
- **æ•°æ®åˆ†æè¡¨** â†” [æ•°æ®åˆ†æAPI](./APIæ–‡æ¡£.md#æ•°æ®åˆ†æapi)
